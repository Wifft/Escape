(()=>{"use strict";var t={648:(t,e,r)=>{function s(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}r.r(e),r.d(e,{Euler:()=>It,Matrix3:()=>ct,Matrix4:()=>yt,Pose:()=>Tt,Quaternion:()=>Pt,SphericalCoordinates:()=>Rt,Vector2:()=>F,Vector3:()=>G,Vector4:()=>et,_Euler:()=>It,_MathUtils:()=>Nt,_Pose:()=>Tt,_SphericalCoordinates:()=>Rt,acos:()=>x,asin:()=>E,assert:()=>s,atan:()=>w,checkNumber:()=>N,clamp:()=>b,clone:()=>u,config:()=>h,configure:()=>a,cos:()=>M,degrees:()=>p,equals:()=>k,exactEquals:()=>S,formatValue:()=>o,isArray:()=>c,lerp:()=>O,radians:()=>g,sin:()=>y,tan:()=>m,toDegrees:()=>d,toRadians:()=>f,withEpsilon:()=>v});const i=1/Math.PI*180,n=1/180*Math.PI,h={};function a(t={}){for(const e in t)s(e in h),h[e]=t[e];return h}function o(t,{precision:e=h.precision||4}={}){return t=function(t){return Math.round(t/h.EPSILON)*h.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function c(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u(t){return t.clone?t.clone():new Array(...t)}function l(t,e,r){if(c(t)){r=r||((s=t).clone?s.clone():new Array(s.length));for(let s=0;s<r.length&&s<t.length;++s)r[s]=e(t[s],s,r);return r}var s;return e(t)}function f(t){return g(t)}function d(t){return p(t)}function g(t,e){return l(t,(t=>t*n),e)}function p(t,e){return l(t,(t=>t*i),e)}function y(t){return l(t,(t=>Math.sin(t)))}function M(t){return l(t,(t=>Math.cos(t)))}function m(t){return l(t,(t=>Math.tan(t)))}function E(t){return l(t,(t=>Math.asin(t)))}function x(t){return l(t,(t=>Math.acos(t)))}function w(t){return l(t,(t=>Math.atan(t)))}function b(t,e,r){return l(t,(t=>Math.max(e,Math.min(r,t))))}function O(t,e,r){return c(t)?t.map(((t,s)=>O(t,e[s],r))):r*e+(1-r)*t}function k(t,e,r){const s=h.EPSILON;r&&(h.EPSILON=r);try{if(t===e)return!0;if(c(t)&&c(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!k(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{h.EPSILON=s}}function S(t,e){if(t===e)return!0;if(t&&"object"==typeof t&&e&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;if(t.exactEquals)return t.exactEquals(e)}if(c(t)&&c(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!S(t[r],e[r]))return!1;return!0}return!1}function v(t,e){const r=h.EPSILON;let s;h.EPSILON=t;try{s=e()}finally{h.EPSILON=r}return s}h.EPSILON=1e-12,h.debug=!1,h.precision=4,h.printTypes=!1,h.printDegrees=!1,h.printRowMajor=!0;class P extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){get ELEMENTS(){return s(!1),0}clone(){return(new this.constructor).copy(this)}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}fromArray(t,e=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}to(t){return t===this?this:c(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toArray(t=[],e=0){for(let r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(h)}formatString(t){let e="";for(let r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+o(this[r],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!k(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,r){void 0===r&&(r=e,e=t,t=this);for(let s=0;s<this.ELEMENTS;++s){const i=t[s];this[s]=i+r*(e[s]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if(Array.isArray(t))return this.multiply(t);for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.scale(1/t)}clampScalar(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}multiplyByScalar(t){return this.scale(t)}get elements(){return this}check(){if(h.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}function N(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function A(t,e,r=""){if(h.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return t}const R={};function _(t,e){R[t]||(R[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class L extends P{get ELEMENTS(){return s(!1),0}copy(t){return s(!1),this}get x(){return this[0]}set x(t){this[0]=N(t)}get y(){return this[1]}set y(t){this[1]=N(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-t[r];e+=s*s}return N(e)}dot(t){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return N(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return s(t>=0&&t<this.ELEMENTS,"index is out of range"),N(this[t])}setComponent(t,e){return s(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var I,T=1e-6,Y="undefined"!=typeof Float32Array?Float32Array:Array;function C(t,e,r){var s=e[0],i=e[1];return t[0]=r[0]*s+r[3]*i+r[6],t[1]=r[1]*s+r[4]*i+r[7],t}function j(t,e,r){var s=e[0],i=e[1];return t[0]=r[0]*s+r[4]*i+r[12],t[1]=r[1]*s+r[5]*i+r[13],t}function Z(t,e,r){const s=e[0],i=e[1],n=r[3]*s+r[7]*i||1;return t[0]=(r[0]*s+r[4]*i)/n,t[1]=(r[1]*s+r[5]*i)/n,t}function K(t,e,r){const s=e[0],i=e[1],n=e[2],h=r[3]*s+r[7]*i+r[11]*n||1;return t[0]=(r[0]*s+r[4]*i+r[8]*n)/h,t[1]=(r[1]*s+r[5]*i+r[9]*n)/h,t[2]=(r[2]*s+r[6]*i+r[10]*n)/h,t}function z(t,e,r){const s=e[0],i=e[1],n=e[2];return t[0]=r[0]*s+r[3]*i+r[6]*n,t[1]=r[1]*s+r[4]*i+r[7]*n,t[2]=r[2]*s+r[5]*i+r[8]*n,t[3]=e[3],t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),I=new Y(2),Y!=Float32Array&&(I[0]=0,I[1]=0);class F extends L{constructor(t=0,e=0){super(2),c(t)&&1===arguments.length?this.copy(t):(h.debug&&(N(t),N(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return h.debug&&(N(t.x),N(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return j(this,this,t),this.check()}transformAsVector(t){return Z(this,this,t),this.check()}transformByMatrix3(t){return C(this,this,t),this.check()}transformByMatrix2x3(t){return function(t,e,r){var s=e[0],i=e[1];t[0]=r[0]*s+r[2]*i+r[4],t[1]=r[1]*s+r[3]*i+r[5]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,r){var s=e[0],i=e[1];t[0]=r[0]*s+r[2]*i,t[1]=r[1]*s+r[3]*i}(this,this,t),this.check()}}function V(){var t=new Y(3);return Y!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function X(t){var e=t[0],r=t[1],s=t[2];return Math.hypot(e,r,s)}function q(t,e,r){var s=new Y(3);return s[0]=t,s[1]=e,s[2]=r,s}function D(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function W(t,e,r){var s=e[0],i=e[1],n=e[2],h=r[0],a=r[1],o=r[2];return t[0]=i*o-n*a,t[1]=n*h-s*o,t[2]=s*a-i*h,t}function B(t,e,r){var s=e[0],i=e[1],n=e[2],h=r[3]*s+r[7]*i+r[11]*n+r[15];return h=h||1,t[0]=(r[0]*s+r[4]*i+r[8]*n+r[12])/h,t[1]=(r[1]*s+r[5]*i+r[9]*n+r[13])/h,t[2]=(r[2]*s+r[6]*i+r[10]*n+r[14])/h,t}function Q(t,e,r){var s=e[0],i=e[1],n=e[2];return t[0]=s*r[0]+i*r[3]+n*r[6],t[1]=s*r[1]+i*r[4]+n*r[7],t[2]=s*r[2]+i*r[5]+n*r[8],t}function H(t,e,r){var s=r[0],i=r[1],n=r[2],h=r[3],a=e[0],o=e[1],c=e[2],u=i*c-n*o,l=n*a-s*c,f=s*o-i*a,d=i*f-n*l,g=n*u-s*f,p=s*l-i*u,y=2*h;return u*=y,l*=y,f*=y,d*=2,g*=2,p*=2,t[0]=a+u+d,t[1]=o+l+g,t[2]=c+f+p,t}var U=X;V();const $=[0,0,0],J={};class G extends L{static get ZERO(){return J.ZERO=J.ZERO||Object.freeze(new G(0,0,0,0))}constructor(t=0,e=0,r=0){super(-0,-0,-0),1===arguments.length&&c(t)?this.copy(t):(h.debug&&(N(t),N(e),N(r)),this[0]=t,this[1]=e,this[2]=r)}set(t,e,r){return this[0]=t,this[1]=e,this[2]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return h.debug&&(N(t.x),N(t.y),N(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=N(t)}angle(t){return r=t,s=(e=this)[0],i=e[1],n=e[2],h=r[0],a=r[1],o=r[2],u=(c=Math.sqrt(s*s+i*i+n*n)*Math.sqrt(h*h+a*a+o*o))&&D(e,r)/c,Math.acos(Math.min(Math.max(u,-1),1));var e,r,s,i,n,h,a,o,c,u}cross(t){return W(this,this,t),this.check()}rotateX({radians:t,origin:e=$}){return function(t,e,r,s){var i=[],n=[];i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],n[0]=i[0],n[1]=i[1]*Math.cos(s)-i[2]*Math.sin(s),n[2]=i[1]*Math.sin(s)+i[2]*Math.cos(s),t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=$}){return function(t,e,r,s){var i=[],n=[];i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],n[0]=i[2]*Math.sin(s)+i[0]*Math.cos(s),n[1]=i[1],n[2]=i[2]*Math.cos(s)-i[0]*Math.sin(s),t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=$}){return function(t,e,r,s){var i=[],n=[];i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],n[0]=i[0]*Math.cos(s)-i[1]*Math.sin(s),n[1]=i[0]*Math.sin(s)+i[1]*Math.cos(s),n[2]=i[2],t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return B(this,this,t),this.check()}transformAsVector(t){return K(this,this,t),this.check()}transformByMatrix3(t){return Q(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,r){const s=e[0],i=e[1];t[0]=r[0]*s+r[2]*i,t[1]=r[1]*s+r[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return H(this,this,t),this.check()}}const tt={};class et extends L{static get ZERO(){return tt.ZERO=tt.ZERO||Object.freeze(new et(0,0,0,0))}constructor(t=0,e=0,r=0,s=0){super(-0,-0,-0,-0),c(t)&&1===arguments.length?this.copy(t):(h.debug&&(N(t),N(e),N(r),N(s)),this[0]=t,this[1]=e,this[2]=r,this[3]=s)}set(t,e,r,s){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return h.debug&&(N(t.x),N(t.y),N(t.z),N(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=N(t)}get w(){return this[3]}set w(t){this[3]=N(t)}transform(t){return B(this,this,t),this.check()}transformByMatrix3(t){return z(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,r){const s=e[0],i=e[1];t[0]=r[0]*s+r[2]*i,t[1]=r[1]*s+r[3]*i,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return H(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class rt extends P{get ELEMENTS(){return s(!1),0}get RANK(){return s(!1),0}toString(){let t="[";if(h.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=" ".concat(this[r*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,r){return this[e*this.RANK+t]=N(r),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const r=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[r+t];return e}setColumn(t,e){const r=t*this.RANK;for(let t=0;t<this.RANK;++t)this[r+t]=e[t];return this}}function st(t,e,r){var s=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=r[0],d=r[1],g=r[2],p=r[3],y=r[4],M=r[5],m=r[6],E=r[7],x=r[8];return t[0]=f*s+d*h+g*c,t[1]=f*i+d*a+g*u,t[2]=f*n+d*o+g*l,t[3]=p*s+y*h+M*c,t[4]=p*i+y*a+M*u,t[5]=p*n+y*o+M*l,t[6]=m*s+E*h+x*c,t[7]=m*i+E*a+x*u,t[8]=m*n+E*o+x*l,t}function it(t,e,r){var s=r[0],i=r[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}const nt=Object.freeze([1,0,0,0,1,0,0,0,1]),ht=Object.freeze([0,0,0,0,0,0,0,0,0]),at=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),ot={};class ct extends rt{static get IDENTITY(){return ot.IDENTITY=ot.IDENTITY||Object.freeze(new ct(nt)),ot.IDENTITY}static get ZERO(){return ot.ZERO=ot.ZERO||Object.freeze(new ct(ht)),ot.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return at}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}set(t,e,r,s,i,n,h,a,o){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this[4]=i,this[5]=n,this[6]=h,this[7]=a,this[8]=o,this.check()}setRowMajor(t,e,r,s,i,n,h,a,o){return this[0]=t,this[1]=s,this[2]=h,this[3]=e,this[4]=i,this[5]=a,this[6]=r,this[7]=n,this[8]=o,this.check()}determinant(){return e=(t=this)[0],r=t[1],s=t[2],i=t[3],n=t[4],h=t[5],a=t[6],o=t[7],e*((c=t[8])*n-h*o)+r*(-c*i+h*a)+s*(o*i-n*a);var t,e,r,s,i,n,h,a,o,c}identity(){return this.copy(nt)}fromQuaternion(t){return function(t,e){var r=e[0],s=e[1],i=e[2],n=e[3],h=r+r,a=s+s,o=i+i,c=r*h,u=s*h,l=s*a,f=i*h,d=i*a,g=i*o,p=n*h,y=n*a,M=n*o;t[0]=1-l-g,t[3]=u-M,t[6]=f+y,t[1]=u+M,t[4]=1-c-g,t[7]=d-p,t[2]=f-y,t[5]=d+p,t[8]=1-c-l}(this,t),this.check()}transpose(){return function(t,e){if(t===e){var r=e[1],s=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=s,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var r=e[0],s=e[1],i=e[2],n=e[3],h=e[4],a=e[5],o=e[6],c=e[7],u=e[8],l=u*h-a*c,f=-u*n+a*o,d=c*n-h*o,g=r*l+s*f+i*d;g&&(g=1/g,t[0]=l*g,t[1]=(-u*s+i*c)*g,t[2]=(a*s-i*h)*g,t[3]=f*g,t[4]=(u*r-i*o)*g,t[5]=(-a*r+i*n)*g,t[6]=d*g,t[7]=(-c*r+s*o)*g,t[8]=(h*r-s*n)*g)}(this,this),this.check()}multiplyLeft(t){return st(this,t,this),this.check()}multiplyRight(t){return st(this,this,t),this.check()}rotate(t){return function(t,e,r){var s=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=Math.sin(r),d=Math.cos(r);t[0]=d*s+f*h,t[1]=d*i+f*a,t[2]=d*n+f*o,t[3]=d*h-f*s,t[4]=d*a-f*i,t[5]=d*o-f*n,t[6]=c,t[7]=u,t[8]=l}(this,this,t),this.check()}scale(t){return Array.isArray(t)?it(this,this,t):it(this,this,[t,t,t]),this.check()}translate(t){return function(t,e,r){var s=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=r[0],d=r[1];t[0]=s,t[1]=i,t[2]=n,t[3]=h,t[4]=a,t[5]=o,t[6]=f*s+d*h+c,t[7]=f*i+d*a+u,t[8]=f*n+d*o+l}(this,this,t),this.check()}transform(t,e){switch(t.length){case 2:e=C(e||[-0,-0],t,this);break;case 3:e=Q(e||[-0,-0,-0],t,this);break;case 4:e=z(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return A(e,t.length),e}transformVector(t,e){return _("Matrix3.transformVector"),this.transform(t,e)}transformVector2(t,e){return _("Matrix3.transformVector"),this.transform(t,e)}transformVector3(t,e){return _("Matrix3.transformVector"),this.transform(t,e)}}function ut(t,e,r){var s=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=e[9],d=e[10],g=e[11],p=e[12],y=e[13],M=e[14],m=e[15],E=r[0],x=r[1],w=r[2],b=r[3];return t[0]=E*s+x*a+w*l+b*p,t[1]=E*i+x*o+w*f+b*y,t[2]=E*n+x*c+w*d+b*M,t[3]=E*h+x*u+w*g+b*m,E=r[4],x=r[5],w=r[6],b=r[7],t[4]=E*s+x*a+w*l+b*p,t[5]=E*i+x*o+w*f+b*y,t[6]=E*n+x*c+w*d+b*M,t[7]=E*h+x*u+w*g+b*m,E=r[8],x=r[9],w=r[10],b=r[11],t[8]=E*s+x*a+w*l+b*p,t[9]=E*i+x*o+w*f+b*y,t[10]=E*n+x*c+w*d+b*M,t[11]=E*h+x*u+w*g+b*m,E=r[12],x=r[13],w=r[14],b=r[15],t[12]=E*s+x*a+w*l+b*p,t[13]=E*i+x*o+w*f+b*y,t[14]=E*n+x*c+w*d+b*M,t[15]=E*h+x*u+w*g+b*m,t}function lt(t,e,r){var s=r[0],i=r[1],n=r[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}!function(){var t=new Y(4);Y!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const ft=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),dt=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),gt=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),pt={};class yt extends rt{static get IDENTITY(){return pt.IDENTITY=pt.IDENTITY||Object.freeze(new yt(ft)),pt.IDENTITY}static get ZERO(){return pt.ZERO=pt.ZERO||Object.freeze(new yt(dt)),pt.ZERO}get INDICES(){return gt}get ELEMENTS(){return 16}get RANK(){return 4}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,r,s,i,n,h,a,o,c,u,l,f,d,g,p){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this[4]=i,this[5]=n,this[6]=h,this[7]=a,this[8]=o,this[9]=c,this[10]=u,this[11]=l,this[12]=f,this[13]=d,this[14]=g,this[15]=p,this.check()}setRowMajor(t,e,r,s,i,n,h,a,o,c,u,l,f,d,g,p){return this[0]=t,this[1]=i,this[2]=o,this[3]=f,this[4]=e,this[5]=n,this[6]=c,this[7]=d,this[8]=r,this[9]=h,this[10]=u,this[11]=g,this[12]=s,this[13]=a,this[14]=l,this[15]=p,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(ft)}fromQuaternion(t){return function(t,e){var r=e[0],s=e[1],i=e[2],n=e[3],h=r+r,a=s+s,o=i+i,c=r*h,u=s*h,l=s*a,f=i*h,d=i*a,g=i*o,p=n*h,y=n*a,M=n*o;t[0]=1-l-g,t[1]=u+M,t[2]=f-y,t[3]=0,t[4]=u-M,t[5]=1-c-g,t[6]=d+p,t[7]=0,t[8]=f+y,t[9]=d-p,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum({left:t,right:e,bottom:r,top:s,near:i,far:n}){return n===1/0?yt._computeInfinitePerspectiveOffCenter(this,t,e,r,s,i):function(t,e,r,s,i,n,h){var a=1/(r-e),o=1/(i-s),c=1/(n-h);t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*o,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+s)*o,t[10]=(h+n)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*n*2*c,t[15]=0}(this,t,e,r,s,i,n),this.check()}static _computeInfinitePerspectiveOffCenter(t,e,r,s,i,n){const h=2*n/(r-e),a=2*n/(i-s),o=(r+e)/(r-e),c=(i+s)/(i-s),u=-2*n;return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=o,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0,t}lookAt(t,e,r){return 1===arguments.length&&({eye:t,center:e,up:r}=t),function(t,e,r,s){var i,n,h,a,o,c,u,l,f,d,g=e[0],p=e[1],y=e[2],M=s[0],m=s[1],E=s[2],x=r[0],w=r[1],b=r[2];Math.abs(g-x)<T&&Math.abs(p-w)<T&&Math.abs(y-b)<T?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=g-x,l=p-w,f=y-b,i=m*(f*=d=1/Math.hypot(u,l,f))-E*(l*=d),n=E*(u*=d)-M*f,h=M*l-m*u,(d=Math.hypot(i,n,h))?(i*=d=1/d,n*=d,h*=d):(i=0,n=0,h=0),a=l*h-f*n,o=f*i-u*h,c=u*n-l*i,(d=Math.hypot(a,o,c))?(a*=d=1/d,o*=d,c*=d):(a=0,o=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=n,t[5]=o,t[6]=l,t[7]=0,t[8]=h,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*g+n*p+h*y),t[13]=-(a*g+o*p+c*y),t[14]=-(u*g+l*p+f*y),t[15]=1)}(this,t,e=e||[0,0,0],r=r||[0,1,0]),this.check()}ortho({left:t,right:e,bottom:r,top:s,near:i=.1,far:n=500}){return function(t,e,r,s,i,n,h){var a=1/(e-r),o=1/(s-i),c=1/(n-h);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*a,t[13]=(i+s)*o,t[14]=(h+n)*c,t[15]=1}(this,t,e,r,s,i,n),this.check()}orthographic({fovy:t=45*Math.PI/180,aspect:e=1,focalDistance:r=1,near:s=.1,far:i=500}){if(t>2*Math.PI)throw Error("radians");const n=t/2,h=r*Math.tan(n),a=h*e;return(new yt).ortho({left:-a,right:a,bottom:-h,top:h,near:s,far:i})}perspective({fovy:t,fov:e=45*Math.PI/180,aspect:r=1,near:s=.1,far:i=500}={}){if((t=t||e)>2*Math.PI)throw Error("radians");return function(t,e,r,s,i){var n,h=1/Math.tan(e/2);t[0]=h/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(n=1/(s-i),t[10]=(i+s)*n,t[14]=2*i*s*n):(t[10]=-1,t[14]=-2*s)}(this,t,r,s,i),this.check()}determinant(){return e=(t=this)[0],r=t[1],s=t[2],i=t[3],n=t[4],h=t[5],a=t[6],o=t[7],c=t[8],u=t[9],l=t[10],f=t[11],d=t[12],g=t[13],p=t[14],(e*h-r*n)*(l*(y=t[15])-f*p)-(e*a-s*n)*(u*y-f*g)+(e*o-i*n)*(u*p-l*g)+(r*a-s*h)*(c*y-f*d)-(r*o-i*h)*(c*p-l*d)+(s*o-i*a)*(c*g-u*d);var t,e,r,s,i,n,h,a,o,c,u,l,f,d,g,p,y}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const r=this.getScale(e||[-0,-0,-0]),s=1/r[0],i=1/r[1],n=1/r[2];return t[0]=this[0]*s,t[1]=this[1]*i,t[2]=this[2]*n,t[3]=0,t[4]=this[4]*s,t[5]=this[5]*i,t[6]=this[6]*n,t[7]=0,t[8]=this[8]*s,t[9]=this[9]*i,t[10]=this[10]*n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const r=this.getScale(e||[-0,-0,-0]),s=1/r[0],i=1/r[1],n=1/r[2];return t[0]=this[0]*s,t[1]=this[1]*i,t[2]=this[2]*n,t[3]=this[4]*s,t[4]=this[5]*i,t[5]=this[6]*n,t[6]=this[8]*s,t[7]=this[9]*i,t[8]=this[10]*n,t}transpose(){return function(t,e){if(t===e){var r=e[1],s=e[2],i=e[3],n=e[6],h=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=n,t[11]=e[14],t[12]=i,t[13]=h,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return function(t,e){var r=e[0],s=e[1],i=e[2],n=e[3],h=e[4],a=e[5],o=e[6],c=e[7],u=e[8],l=e[9],f=e[10],d=e[11],g=e[12],p=e[13],y=e[14],M=e[15],m=r*a-s*h,E=r*o-i*h,x=r*c-n*h,w=s*o-i*a,b=s*c-n*a,O=i*c-n*o,k=u*p-l*g,S=u*y-f*g,v=u*M-d*g,P=l*y-f*p,N=l*M-d*p,A=f*M-d*y,R=m*A-E*N+x*P+w*v-b*S+O*k;R&&(R=1/R,t[0]=(a*A-o*N+c*P)*R,t[1]=(i*N-s*A-n*P)*R,t[2]=(p*O-y*b+M*w)*R,t[3]=(f*b-l*O-d*w)*R,t[4]=(o*v-h*A-c*S)*R,t[5]=(r*A-i*v+n*S)*R,t[6]=(y*x-g*O-M*E)*R,t[7]=(u*O-f*x+d*E)*R,t[8]=(h*N-a*v+c*k)*R,t[9]=(s*v-r*N-n*k)*R,t[10]=(g*b-p*x+M*m)*R,t[11]=(l*x-u*b-d*m)*R,t[12]=(a*S-h*P-o*k)*R,t[13]=(r*P-s*S+i*k)*R,t[14]=(p*E-g*w-y*m)*R,t[15]=(u*w-l*E+f*m)*R)}(this,this),this.check()}multiplyLeft(t){return ut(this,t,this),this.check()}multiplyRight(t){return ut(this,this,t),this.check()}rotateX(t){return function(t,e,r){var s=Math.sin(r),i=Math.cos(r),n=e[4],h=e[5],a=e[6],o=e[7],c=e[8],u=e[9],l=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*i+c*s,t[5]=h*i+u*s,t[6]=a*i+l*s,t[7]=o*i+f*s,t[8]=c*i-n*s,t[9]=u*i-h*s,t[10]=l*i-a*s,t[11]=f*i-o*s}(this,this,t),this.check()}rotateY(t){return function(t,e,r){var s=Math.sin(r),i=Math.cos(r),n=e[0],h=e[1],a=e[2],o=e[3],c=e[8],u=e[9],l=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*i-c*s,t[1]=h*i-u*s,t[2]=a*i-l*s,t[3]=o*i-f*s,t[8]=n*s+c*i,t[9]=h*s+u*i,t[10]=a*s+l*i,t[11]=o*s+f*i}(this,this,t),this.check()}rotateZ(t){return function(t,e,r){var s=Math.sin(r),i=Math.cos(r),n=e[0],h=e[1],a=e[2],o=e[3],c=e[4],u=e[5],l=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*i+c*s,t[1]=h*i+u*s,t[2]=a*i+l*s,t[3]=o*i+f*s,t[4]=c*i-n*s,t[5]=u*i-h*s,t[6]=l*i-a*s,t[7]=f*i-o*s}(this,this,t),this.check()}rotateXYZ([t,e,r]){return this.rotateX(t).rotateY(e).rotateZ(r)}rotateAxis(t,e){return function(t,e,r,s){var i,n,h,a,o,c,u,l,f,d,g,p,y,M,m,E,x,w,b,O,k,S,v,P,N=s[0],A=s[1],R=s[2],_=Math.hypot(N,A,R);_<T||(N*=_=1/_,A*=_,R*=_,i=Math.sin(r),h=1-(n=Math.cos(r)),a=e[0],o=e[1],c=e[2],u=e[3],l=e[4],f=e[5],d=e[6],g=e[7],p=e[8],y=e[9],M=e[10],m=e[11],E=N*N*h+n,x=A*N*h+R*i,w=R*N*h-A*i,b=N*A*h-R*i,O=A*A*h+n,k=R*A*h+N*i,S=N*R*h+A*i,v=A*R*h-N*i,P=R*R*h+n,t[0]=a*E+l*x+p*w,t[1]=o*E+f*x+y*w,t[2]=c*E+d*x+M*w,t[3]=u*E+g*x+m*w,t[4]=a*b+l*O+p*k,t[5]=o*b+f*O+y*k,t[6]=c*b+d*O+M*k,t[7]=u*b+g*O+m*k,t[8]=a*S+l*v+p*P,t[9]=o*S+f*v+y*P,t[10]=c*S+d*v+M*P,t[11]=u*S+g*v+m*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return Array.isArray(t)?lt(this,this,t):lt(this,this,[t,t,t]),this.check()}translate(t){return function(t,e,r){var s,i,n,h,a,o,c,u,l,f,d,g,p=r[0],y=r[1],M=r[2];e===t?(t[12]=e[0]*p+e[4]*y+e[8]*M+e[12],t[13]=e[1]*p+e[5]*y+e[9]*M+e[13],t[14]=e[2]*p+e[6]*y+e[10]*M+e[14],t[15]=e[3]*p+e[7]*y+e[11]*M+e[15]):(s=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=e[9],d=e[10],g=e[11],t[0]=s,t[1]=i,t[2]=n,t[3]=h,t[4]=a,t[5]=o,t[6]=c,t[7]=u,t[8]=l,t[9]=f,t[10]=d,t[11]=g,t[12]=s*p+a*y+l*M+e[12],t[13]=i*p+o*y+f*M+e[13],t[14]=n*p+c*y+d*M+e[14],t[15]=h*p+u*y+g*M+e[15])}(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=function(t,e,r){var s=e[0],i=e[1],n=e[2],h=e[3];return t[0]=r[0]*s+r[4]*i+r[8]*n+r[12]*h,t[1]=r[1]*s+r[5]*i+r[9]*n+r[13]*h,t[2]=r[2]*s+r[6]*i+r[10]*n+r[14]*h,t[3]=r[3]*s+r[7]*i+r[11]*n+r[15]*h,t}(e||[-0,-0,-0,-0],t,this),A(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:r}=t;switch(r){case 2:e=j(e||[-0,-0],t,this);break;case 3:e=B(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return A(e,t.length),e}transformAsVector(t,e){switch(t.length){case 2:e=Z(e||[-0,-0],t,this);break;case 3:e=K(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return A(e,t.length),e}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,r){return this.identity().translate([t,e,r])}transformPoint(t,e){return _("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}transformVector(t,e){return _("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}transformDirection(t,e){return _("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}function Mt(){var t=new Y(4);return Y!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function mt(t,e,r){r*=.5;var s=Math.sin(r);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(r),t}function Et(t,e,r){var s=e[0],i=e[1],n=e[2],h=e[3],a=r[0],o=r[1],c=r[2],u=r[3];return t[0]=s*u+h*a+i*c-n*o,t[1]=i*u+h*o+n*a-s*c,t[2]=n*u+h*c+s*o-i*a,t[3]=h*u-s*a-i*o-n*c,t}var xt,wt,bt,Ot=function(t){var e=t[0],r=t[1],s=t[2],i=t[3];return Math.hypot(e,r,s,i)},kt=function(t){var e=t[0],r=t[1],s=t[2],i=t[3];return e*e+r*r+s*s+i*i},St=(xt=V(),wt=q(1,0,0),bt=q(0,1,0),function(t,e,r){var s=D(e,r);return s<-.999999?(W(xt,wt,e),U(xt)<1e-6&&W(xt,bt,e),function(t,e){var r=e[0],s=e[1],i=e[2],n=r*r+s*s+i*i;n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}(xt,xt),mt(t,xt,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(W(xt,e,r),t[0]=xt[0],t[1]=xt[1],t[2]=xt[2],t[3]=1+s,function(t,e){var r=e[0],s=e[1],i=e[2],n=e[3],h=r*r+s*s+i*i+n*n;return h>0&&(h=1/Math.sqrt(h)),t[0]=r*h,t[1]=s*h,t[2]=i*h,t[3]=n*h,t}(t,t))});Mt(),Mt(),function(){var t=new Y(9);Y!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const vt=[0,0,0,1];class Pt extends P{constructor(t=0,e=0,r=0,s=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,r,s)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,r,s){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this.check()}fromMatrix3(t){return function(t,e){var r,s=e[0]+e[4]+e[8];if(s>0)r=Math.sqrt(s+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var n=(i+1)%3,h=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*n+n]-e[3*h+h]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*n+h]-e[3*h+n])*r,t[n]=(e[3*n+i]+e[3*i+n])*r,t[h]=(e[3*h+i]+e[3*i+h])*r}}(this,t),this.check()}identity(){return function(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}fromAxisRotation(t,e){return mt(this,t,e),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=N(t)}get y(){return this[1]}set y(t){this[1]=N(t)}get z(){return this[2]}set z(t){this[2]=N(t)}get w(){return this[3]}set w(t){this[3]=N(t)}len(){return Ot(this)}lengthSquared(){return kt(this)}dot(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,t)}rotationTo(t,e){return St(this,t,e),this.check()}add(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return function(t,e,r){t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3]}(this,this,t),this.check()}calculateW(){return function(t,e){var r=e[0],s=e[1],i=e[2];t[0]=r,t[1]=s,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-s*s-i*i))}(this,this),this.check()}conjugate(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function(t,e){var r=e[0],s=e[1],i=e[2],n=e[3],h=r*r+s*s+i*i+n*n,a=h?1/h:0;t[0]=-r*a,t[1]=-s*a,t[2]=-i*a,t[3]=n*a}(this,this),this.check()}lerp(t,e,r){return function(t,e,r,s){var i=e[0],n=e[1],h=e[2],a=e[3];t[0]=i+s*(r[0]-i),t[1]=n+s*(r[1]-n),t[2]=h+s*(r[2]-h),t[3]=a+s*(r[3]-a)}(this,t,e,r),this.check()}multiplyRight(t,e){return s(!e),Et(this,this,t),this.check()}multiplyLeft(t,e){return s(!e),Et(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,r){r*=.5;var s=e[0],i=e[1],n=e[2],h=e[3],a=Math.sin(r),o=Math.cos(r);t[0]=s*o+h*a,t[1]=i*o+n*a,t[2]=n*o-i*a,t[3]=h*o-s*a}(this,this,t),this.check()}rotateY(t){return function(t,e,r){r*=.5;var s=e[0],i=e[1],n=e[2],h=e[3],a=Math.sin(r),o=Math.cos(r);t[0]=s*o-n*a,t[1]=i*o+h*a,t[2]=n*o+s*a,t[3]=h*o-i*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,r){r*=.5;var s=e[0],i=e[1],n=e[2],h=e[3],a=Math.sin(r),o=Math.cos(r);t[0]=s*o+i*a,t[1]=i*o-s*a,t[2]=n*o+h*a,t[3]=h*o-n*a}(this,this,t),this.check()}scale(t){return function(t,e,r){t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r}(this,this,t),this.check()}slerp(t,e,r){switch(arguments.length){case 1:({start:t=vt,target:e,ratio:r}=arguments[0]);break;case 2:[e,r]=arguments,t=this}return function(t,e,r,s){var i,n,h,a,o,c=e[0],u=e[1],l=e[2],f=e[3],d=r[0],g=r[1],p=r[2],y=r[3];(n=c*d+u*g+l*p+f*y)<0&&(n=-n,d=-d,g=-g,p=-p,y=-y),1-n>T?(i=Math.acos(n),h=Math.sin(i),a=Math.sin((1-s)*i)/h,o=Math.sin(s*i)/h):(a=1-s,o=s),t[0]=a*c+o*d,t[1]=a*u+o*g,t[2]=a*l+o*p,t[3]=a*f+o*y}(this,t,e,r),this.check()}transformVector4(t,e=t){return function(t,e,r){var s=e[0],i=e[1],n=e[2],h=r[0],a=r[1],o=r[2],c=r[3],u=c*s+a*n-o*i,l=c*i+o*s-h*n,f=c*n+h*i-a*s,d=-h*s-a*i-o*n;t[0]=u*c+d*-h+l*-o-f*-a,t[1]=l*c+d*-a+f*-h-u*-o,t[2]=f*c+d*-o+u*-a-l*-h,t[3]=e[3]}(e,t,this),A(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t,e){return this.multiplyLeft(t,e)}multiply(t,e){return this.multiplyRight(t,e)}}const Nt={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},At=1e-6;class Rt{constructor({phi:t=0,theta:e=0,radius:r=1,bearing:s,pitch:i,altitude:n,radiusScale:h=6371e3}={}){this.phi=t,this.theta=e,this.radius=r||n||1,this.radiusScale=h||1,void 0!==s&&(this.bearing=s),void 0!==i&&(this.pitch=i),this.check()}toString(){return this.formatString(h)}formatString({printTypes:t=!1}){const e=o;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return k(this.radius,t.radius)&&k(this.theta,t.theta)&&k(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-p(this.phi)}set bearing(t){this.phi=Math.PI-g(t)}get pitch(){return p(this.theta)}set pitch(t){this.theta=g(t)}get longitude(){return p(this.phi)}get latitude(){return p(this.theta)}get lng(){return p(this.phi)}get lat(){return p(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this.check()}clone(){return(new Rt).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,r]){this.radius=1+r/this.radiusScale,this.phi=g(e),this.theta=g(t)}fromVector3(t){return this.radius=X(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(b(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new G(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(At,Math.min(Math.PI-At,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}const _t="Unknown Euler angle order",Lt=.99999;class It extends P{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return It.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(t){return It.RotationOrders[t]}get ELEMENTS(){return 4}constructor(t=0,e=0,r=0,s=It.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(t,e,r,s)}fromQuaternion(t){const[e,r,s,i]=t,n=r*r,h=-2*(n+s*s)+1,a=2*(e*r+i*s);let o=-2*(e*s-i*r);const c=2*(r*s+i*e),u=-2*(e*e+n)+1;o=o>1?1:o,o=o<-1?-1:o;const l=Math.atan2(c,u),f=Math.asin(o),d=Math.atan2(a,h);return new It(l,f,d,It.RollPitchYaw)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}set(t=0,e=0,r=0,s){return this[0]=t,this[1]=e,this[2]=r,this[3]=Number.isFinite(s)?s:this[3],this.check()}validate(){return(t=this[3])>=0&&t<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var t}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}toArray4(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}toVector3(t=[-0,-0,-0]){return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}get x(){return this[0]}set x(t){this[0]=N(t)}get y(){return this[1]}set y(t){this[1]=N(t)}get z(){return this[2]}set z(t){this[2]=N(t)}get alpha(){return this[0]}set alpha(t){this[0]=N(t)}get beta(){return this[1]}set beta(t){this[1]=N(t)}get gamma(){return this[2]}set gamma(t){this[2]=N(t)}get phi(){return this[0]}set phi(t){this[0]=N(t)}get theta(){return this[1]}set theta(t){this[1]=N(t)}get psi(){return this[2]}set psi(t){this[2]=N(t)}get roll(){return this[0]}set roll(t){this[0]=N(t)}get pitch(){return this[1]}set pitch(t){this[1]=N(t)}get yaw(){return this[2]}set yaw(t){this[2]=N(t)}get order(){return this[3]}set order(t){this[3]=function(t){if(t<0&&t>=6)throw new Error(_t);return t}(t)}fromVector3(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}fromArray(t,e=0){return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}fromRollPitchYaw(t,e,r){return this.set(t,e,r,It.ZYX)}fromRotationMatrix(t,e=It.DefaultOrder){return this._fromRotationMatrix(t,e),this.check()}getRotationMatrix(t){return this._getRotationMatrix(t)}getQuaternion(){const t=new Pt;switch(this[3]){case It.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case It.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case It.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case It.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case It.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case It.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(_t)}}_fromRotationMatrix(t,e=It.DefaultOrder){const r=t.elements,s=r[0],i=r[4],n=r[8],h=r[1],a=r[5],o=r[9],c=r[2],u=r[6],l=r[10];switch(e=e||this[3]){case It.XYZ:this[1]=Math.asin(b(n,-1,1)),Math.abs(n)<Lt?(this[0]=Math.atan2(-o,l),this[2]=Math.atan2(-i,s)):(this[0]=Math.atan2(u,a),this[2]=0);break;case It.YXZ:this[0]=Math.asin(-b(o,-1,1)),Math.abs(o)<Lt?(this[1]=Math.atan2(n,l),this[2]=Math.atan2(h,a)):(this[1]=Math.atan2(-c,s),this[2]=0);break;case It.ZXY:this[0]=Math.asin(b(u,-1,1)),Math.abs(u)<Lt?(this[1]=Math.atan2(-c,l),this[2]=Math.atan2(-i,a)):(this[1]=0,this[2]=Math.atan2(h,s));break;case It.ZYX:this[1]=Math.asin(-b(c,-1,1)),Math.abs(c)<Lt?(this[0]=Math.atan2(u,l),this[2]=Math.atan2(h,s)):(this[0]=0,this[2]=Math.atan2(-i,a));break;case It.YZX:this[2]=Math.asin(b(h,-1,1)),Math.abs(h)<Lt?(this[0]=Math.atan2(-o,a),this[1]=Math.atan2(-c,s)):(this[0]=0,this[1]=Math.atan2(n,l));break;case It.XZY:this[2]=Math.asin(-b(i,-1,1)),Math.abs(i)<Lt?(this[0]=Math.atan2(u,a),this[1]=Math.atan2(n,s)):(this[0]=Math.atan2(-o,l),this[1]=0);break;default:throw new Error(_t)}return this[3]=e,this}_getRotationMatrix(t){const e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=this.x,s=this.y,i=this.z,n=Math.cos(r),h=Math.cos(s),a=Math.cos(i),o=Math.sin(r),c=Math.sin(s),u=Math.sin(i);switch(this[3]){case It.XYZ:{const t=n*a,r=n*u,s=o*a,i=o*u;e[0]=h*a,e[4]=-h*u,e[8]=c,e[1]=r+s*c,e[5]=t-i*c,e[9]=-o*h,e[2]=i-t*c,e[6]=s+r*c,e[10]=n*h;break}case It.YXZ:{const t=h*a,r=h*u,s=c*a,i=c*u;e[0]=t+i*o,e[4]=s*o-r,e[8]=n*c,e[1]=n*u,e[5]=n*a,e[9]=-o,e[2]=r*o-s,e[6]=i+t*o,e[10]=n*h;break}case It.ZXY:{const t=h*a,r=h*u,s=c*a,i=c*u;e[0]=t-i*o,e[4]=-n*u,e[8]=s+r*o,e[1]=r+s*o,e[5]=n*a,e[9]=i-t*o,e[2]=-n*c,e[6]=o,e[10]=n*h;break}case It.ZYX:{const t=n*a,r=n*u,s=o*a,i=o*u;e[0]=h*a,e[4]=s*c-r,e[8]=t*c+i,e[1]=h*u,e[5]=i*c+t,e[9]=r*c-s,e[2]=-c,e[6]=o*h,e[10]=n*h;break}case It.YZX:{const t=n*h,r=n*c,s=o*h,i=o*c;e[0]=h*a,e[4]=i-t*u,e[8]=s*u+r,e[1]=u,e[5]=n*a,e[9]=-o*a,e[2]=-c*a,e[6]=r*u+s,e[10]=t-i*u;break}case It.XZY:{const t=n*h,r=n*c,s=o*h,i=o*c;e[0]=h*a,e[4]=-u,e[8]=c*a,e[1]=t*u+i,e[5]=n*a,e[9]=r*u-s,e[2]=s*u-r,e[6]=o*a,e[10]=i*u+t;break}default:throw new Error(_t)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}toQuaternion(){const t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),s=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),n=Math.sin(.5*this.pitch);return new Pt(t*s*i-e*r*n,t*r*n+e*s*i,e*r*i-t*s*n,t*r*i+e*s*n)}}class Tt{constructor({x:t=0,y:e=0,z:r=0,roll:s=0,pitch:i=0,yaw:n=0,position:h,orientation:a}={}){Array.isArray(h)&&3===h.length?this.position=new G(h):this.position=new G(t,e,r),Array.isArray(a)&&4===a.length?this.orientation=new It(a,a[3]):this.orientation=new It(s,i,n,It.RollPitchYaw)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get z(){return this.position.z}set z(t){this.position.z=t}get roll(){return this.orientation.roll}set roll(t){this.orientation.roll=t}get pitch(){return this.orientation.pitch}set pitch(t){this.orientation.pitch=t}get yaw(){return this.orientation.yaw}set yaw(t){this.orientation.yaw=t}getPosition(){return this.position}getOrientation(){return this.orientation}equals(t){return!!t&&this.position.equals(t.position)&&this.orientation.equals(t.orientation)}exactEquals(t){return!!t&&this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation)}getTransformationMatrix(){const t=Math.sin(this.roll),e=Math.sin(this.pitch),r=Math.sin(this.yaw),s=Math.cos(this.roll),i=Math.cos(this.pitch),n=Math.cos(this.yaw);return(new yt).setRowMajor(n*i,-r*s+n*e*t,r*t+n*e*s,this.x,r*i,n*s+r*e*t,-n*t+r*e*s,this.y,-e,i*t,i*s,this.z,0,0,0,1)}getTransformationMatrixFromPose(t){return(new yt).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}getTransformationMatrixToPose(t){return(new yt).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}const Yt="undefined"!=typeof self&&self,Ct="undefined"!=typeof window&&window;(void 0!==r.g&&r.g||Yt||Ct).mathgl={config:h}},434:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.uri=t}async getImageData(){return this.loadFile().then((async t=>{const e=await createImageBitmap(t),r=document.createElement("canvas"),s=r.getContext("2d");return r.width=e.width,r.height=e.height,s.drawImage(e,0,0),s.getImageData(0,0,r.width,r.height).data}))}async loadFile(){const t=await fetch(this.uri),e=await t.blob();return new File([e],"bitmap.png",e)}}},862:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(r(486)),n=s(r(974)),h=s(r(319)),a=s(r(111)),o=r(648);class c extends i.default{constructor(t,e){super(t,e),this.lastTime=(new Date).getTime(),this.unprocessedFrames=0,this.width=t,this.height=e,this.context=this.getCanvasInstance(),this.level=new h.default(this.context),this.player=new a.default(this.level,new o.Vector2(h.default.OFFSET,this.height-h.default.OFFSET-32),new o.Vector2(16,32),new o.Vector4(255,255,0,255)),this.run()}run(){n.default.disableImageSmoothing(this.context),this.level.init(this.player),window.requestAnimationFrame((()=>this.tick()))}tick(){n.default.clearRect(this.context,this.width,this.height);const t=(new Date).getTime();for(this.unprocessedFrames+=60*(t-this.lastTime)*1e3,this.unprocessedFrames>10&&(this.unprocessedFrames=10);this.unprocessedFrames>1;)this.player.tick(),this.unprocessedFrames--;this.render(),window.requestAnimationFrame((()=>this.tick()))}render(){this.level.render()}}new c(800,400)},319:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(648),n=s(r(974)),h=s(r(777)),a=s(r(434)),o=s(r(134)),c=s(r(335)),u=s(r(126));class l{constructor(t){this.renderables=new Array,this.collidables=new Array,this.pixels=new Array,this.bitmap=new a.default("../../assets/img/bitmap.png"),this.context=t}init(t){this.loadPixels(),this.addBlocks(),this.add(t),console.log(this.getAllCollidables())}addBlocks(){this.loadPixels().then((()=>{this.pixels.forEach((t=>{switch(t.colorHex){case 4278190335:this.add(new h.default(t.pos,new i.Vector2(16,16)));break;case 16711935:this.add(new u.default(t.pos,new i.Vector2(16,16)));break;case 65535:this.add(new c.default(t.pos,new i.Vector2(16,16)))}}))}))}add(t){return this.renderables.push(t),"isCollidable"in t?(this.collidables.push(t),t):t}getAllRenderables(){return this.renderables}getAllCollidables(){return this.collidables}render(){n.default.disableImageSmoothing(this.context),this.getAllRenderables().forEach((t=>t.render(this.context)))}async loadPixels(){return this.bitmap.getImageData().then((t=>{const e=new i.Vector2(0,0);for(let r=4;r<=t.length;r+=4){const s=Array.from(t.subarray(r-4,r));e.x>=50&&(e.x=0,e.y++),this.pixels.push(new o.default(new i.Vector2(e.x,e.y),new i.Vector4(s))),e.x++}this.pixels=this.pixels.filter(((t,e,r)=>e===r.findIndex((e=>e.pos.equals(t.pos.elements)))))}))}}e.default=l,l.OFFSET=16},134:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(r(6));e.default=class{constructor(t,e){this.pos=t,this.color=e,this.colorHex=i.default.rgba2Hex(e)}}},478:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(r(974)),n=s(r(6));e.default=class{constructor(t,e,r){this.pos=t.multiplyByScalar(16),this.size=e,this.color=r,this.hexColor=n.default.rgba2Hex(r),this.isCollidable=!0}render(t){i.default.renderRect(t,this.pos,this.size,this.color)}}},777:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(648),n=s(r(478));class h extends n.default{constructor(t,e){super(t,e,new i.Vector4(189,195,199,255))}}e.default=h},126:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(648),n=s(r(478));class h extends n.default{constructor(t,e){super(t,e,new i.Vector4(65,195,123,255))}}e.default=h},335:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(648),n=s(r(478));class h extends n.default{constructor(t,e){super(t,e,new i.Vector4(199,176,101,255))}}e.default=h},486:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.width=t,this.height=e}getCanvasInstance(){const t=document.querySelector("#game");t.width=this.width,t.height=this.height;const e=t.getContext("2d");if(null===e)throw"Your browser don't support canvas :(";return e}}},35:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=r(533);e.default=class{constructor(){this.keysDown=new Array,window.onkeydown=t=>this.onKeyDown(t),window.onkeyup=t=>this.onKeyUp(t)}onKeyDown(t){const e=this.getPseduoKeyCode(t.code);null!==e&&(this.keysDown[e]=!0)}onKeyUp(t){const e=this.getPseduoKeyCode(t.code);null!==e&&(this.keysDown[e]=!1)}getPseduoKeyCode(t){let e=null;switch(t){case"KeyW":e=s.PseudoKeyCodes.W_KEY;break;case"KeyA":e=s.PseudoKeyCodes.A_KEY;break;case"KeyS":e=s.PseudoKeyCodes.S_KEY;break;case"KeyD":e=s.PseudoKeyCodes.D_KEY;break;case"KeySpace":e=s.PseudoKeyCodes.SPACE_KEY}return e}}},111:function(t,e,r){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(648),n=r(533),h=s(r(35)),a=s(r(974)),o=s(r(686));class c extends h.default{constructor(t,e,r,s){super(),this.jumping=!1,this.falling=!1,this.grounded=!0,this.posA=new i.Vector2,this.speed=.25,this.pos=e,this.size=r,this.color=s,this.level=t}render(t){a.default.renderRect(t,this.pos,this.size,this.color)}tick(){this.keyboardMove();for(const t of this.level.getAllCollidables())switch(console.log(o.default.intersects(this,t)),o.default.checkCollision(this,t)){case"b":this.jumping&&(this.falling=!0,this.jumping=!1);break;case"t":this.falling&&(this.grounded=!0,this.falling=!1)}this.grounded||this.jumping||!this.falling||(this.pos.y+=this.speed),this.tryJump()}keyboardMove(){this.keysDown[n.PseudoKeyCodes.W_KEY]&&this.grounded&&(this.posA=new i.Vector2(this.pos.x,this.pos.y),this.jumping=!0),this.keysDown[n.PseudoKeyCodes.A_KEY]&&(this.pos.x-=this.speed),this.keysDown[n.PseudoKeyCodes.D_KEY]&&(this.pos.x+=this.speed)}tryJump(){this.jumping&&(this.grounded=!1,this.pos.y-=this.speed,this.pos.y<this.posA.y-64&&(this.jumping=!1,this.falling=!0))}}e.default=c},533:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.PseudoKeyCodes=void 0,(r=e.PseudoKeyCodes||(e.PseudoKeyCodes={}))[r.W_KEY=0]="W_KEY",r[r.A_KEY=1]="A_KEY",r[r.S_KEY=2]="S_KEY",r[r.D_KEY=3]="D_KEY",r[r.SPACE_KEY=4]="SPACE_KEY"},974:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r extends CanvasRenderingContext2D{static renderRect(t,e,r,s,i=!1){this.resetFillStyle(t),t.fillStyle=this.getColor(s).toString(),t.fillRect(e.x,e.y,r.x,r.y),i&&t.strokeRect(e.x,e.y,r.x,r.y),this.resetFillStyle(t)}static renderCircle(t,e,r,s,i=!1,n=!0){this.resetFillStyle(t),t.beginPath(),t.fillStyle=this.getColor(s).toString(),t.arc(e.x,e.y,r.x+r.y??0,0,2*Math.PI),n&&t.fill(),i&&t.stroke(),this.resetFillStyle(t)}static renderText(t,e,r,s,i){t.font=r,t.fillText(e,s.x,s.y,i),this.resetTextSettings(t)}static renderShadows(t,e,r,s){t.shadowColor=e,t.shadowBlur=r,t.shadowOffsetX=s.x,t.shadowOffsetY=s.y}static drawImage(t,e,r,s){const i=new Image;i.src=e,t.drawImage(i,r.x,r.y,s.x,s.y)}static disableImageSmoothing(t){t.imageSmoothingEnabled=!1}static clearRect(t,e,r){t.clearRect(0,0,e,r)}static resetImageSmoothing(t){t.imageSmoothingEnabled=!0}static resetShadows(t){t.shadowColor="rgba(0, 0, 0, 0.0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}static resetFillStyle(t){t.fillStyle="rgb(0, 0, 0)"}static resetTextSettings(t){t.font="10px sans-serif"}static getColor(t){return`rgb(${t.x}, ${t.y}, ${t.z})`}}e.default=r},6:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{static range(t,e){const r=[];for(let s=t;s<=e;s++)r.push(s);return r}static isInRange(t,e){return t>=e[0]&&t<=e[1]}static randomRange(t,e){return Math.floor(Math.random()*(e-t+1)+t)}static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}static rgba2Hex(t){let e="";for(const s of t.elements)e+=r.rgbaValue2Hex(s);return parseInt("0x"+e)}static rgbaValue2Hex(t){let e=Number(t).toString(16);return e.length<2&&(e="0"+e),e}}e.default=r},686:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=r(648);e.default=class{static checkCollision(t,e){const r=new s.Vector2(t.pos.x+t.size.x/2-(e.pos.x+e.size.x/2),t.pos.y+t.size.y/2-(e.pos.y+e.size.y/2)),i=new s.Vector2(t.size.x/2+e.size.x/2,t.size.y/2+e.size.y/2);let n=null;if(Math.abs(r.x)<i.x&&Math.abs(r.y)<i.y){const e=i.x-Math.abs(r.x),s=i.y-Math.abs(r.y);if(e>=s)return t.falling&&(t.grounded=!0,t.falling=!1),n=r.y>0?"b":"t",r.y>0?t.pos.y+=s:t.pos.y-=s,n;n=r.x>0?"r":"l",r.x>0?t.pos.x+=e:t.pos.x-=e}return n}static intersects(t,e){return t.pos.x<e.pos.x+e.size.x&&t.pos.x+t.size.x>e.pos.x&&t.pos.y<e.pos.y+e.size.y&&t.pos.y+t.size.y>e.pos.y}}}},e={};function r(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,r),n.exports}r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(862)})();