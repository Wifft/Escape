(()=>{"use strict";var t={648:(t,e,s)=>{function r(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}s.r(e),s.d(e,{Euler:()=>It,Matrix3:()=>ct,Matrix4:()=>yt,Pose:()=>Tt,Quaternion:()=>Pt,SphericalCoordinates:()=>Rt,Vector2:()=>K,Vector3:()=>G,Vector4:()=>et,_Euler:()=>It,_MathUtils:()=>_t,_Pose:()=>Tt,_SphericalCoordinates:()=>Rt,acos:()=>x,asin:()=>E,assert:()=>r,atan:()=>w,checkNumber:()=>_,clamp:()=>b,clone:()=>u,config:()=>h,configure:()=>a,cos:()=>m,degrees:()=>p,equals:()=>v,exactEquals:()=>S,formatValue:()=>o,isArray:()=>c,lerp:()=>O,radians:()=>g,sin:()=>y,tan:()=>M,toDegrees:()=>d,toRadians:()=>f,withEpsilon:()=>k});const i=1/Math.PI*180,n=1/180*Math.PI,h={};function a(t={}){for(const e in t)r(e in h),h[e]=t[e];return h}function o(t,{precision:e=h.precision||4}={}){return t=function(t){return Math.round(t/h.EPSILON)*h.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function c(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u(t){return t.clone?t.clone():new Array(...t)}function l(t,e,s){if(c(t)){s=s||((r=t).clone?r.clone():new Array(r.length));for(let r=0;r<s.length&&r<t.length;++r)s[r]=e(t[r],r,s);return s}var r;return e(t)}function f(t){return g(t)}function d(t){return p(t)}function g(t,e){return l(t,(t=>t*n),e)}function p(t,e){return l(t,(t=>t*i),e)}function y(t){return l(t,(t=>Math.sin(t)))}function m(t){return l(t,(t=>Math.cos(t)))}function M(t){return l(t,(t=>Math.tan(t)))}function E(t){return l(t,(t=>Math.asin(t)))}function x(t){return l(t,(t=>Math.acos(t)))}function w(t){return l(t,(t=>Math.atan(t)))}function b(t,e,s){return l(t,(t=>Math.max(e,Math.min(s,t))))}function O(t,e,s){return c(t)?t.map(((t,r)=>O(t,e[r],s))):s*e+(1-s)*t}function v(t,e,s){const r=h.EPSILON;s&&(h.EPSILON=s);try{if(t===e)return!0;if(c(t)&&c(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!v(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{h.EPSILON=r}}function S(t,e){if(t===e)return!0;if(t&&"object"==typeof t&&e&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;if(t.exactEquals)return t.exactEquals(e)}if(c(t)&&c(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!S(t[s],e[s]))return!1;return!0}return!1}function k(t,e){const s=h.EPSILON;let r;h.EPSILON=t;try{r=e()}finally{h.EPSILON=s}return r}h.EPSILON=1e-12,h.debug=!1,h.precision=4,h.printTypes=!1,h.printDegrees=!1,h.printRowMajor=!0;class P extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){get ELEMENTS(){return r(!1),0}clone(){return(new this.constructor).copy(this)}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}fromArray(t,e=0){for(let s=0;s<this.ELEMENTS;++s)this[s]=t[s+e];return this.check()}to(t){return t===this?this:c(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toArray(t=[],e=0){for(let s=0;s<this.ELEMENTS;++s)t[e+s]=this[s];return t}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(h)}formatString(t){let e="";for(let s=0;s<this.ELEMENTS;++s)e+=(s>0?", ":"")+o(this[s],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!v(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,s){void 0===s&&(s=e,e=t,t=this);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+s*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t[s]),e[s]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if(Array.isArray(t))return this.multiply(t);for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.scale(1/t)}clampScalar(t,e){for(let s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t),e);return this.check()}multiplyByScalar(t){return this.scale(t)}get elements(){return this}check(){if(h.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}function _(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function N(t,e,s=""){if(h.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(s," some fields set to invalid numbers'"));return t}const R={};function A(t,e){R[t]||(R[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class L extends P{get ELEMENTS(){return r(!1),0}copy(t){return r(!1),this}get x(){return this[0]}set x(t){this[0]=_(t)}get y(){return this[1]}set y(t){this[1]=_(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let s=0;s<this.ELEMENTS;++s){const r=this[s]-t[s];e+=r*r}return _(e)}dot(t){let e=0;for(let s=0;s<this.ELEMENTS;++s)e+=this[s]*t[s];return _(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return r(t>=0&&t<this.ELEMENTS,"index is out of range"),_(this[t])}setComponent(t,e){return r(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var I,T=1e-6,Y="undefined"!=typeof Float32Array?Float32Array:Array;function C(t,e,s){var r=e[0],i=e[1];return t[0]=s[0]*r+s[3]*i+s[6],t[1]=s[1]*r+s[4]*i+s[7],t}function j(t,e,s){var r=e[0],i=e[1];return t[0]=s[0]*r+s[4]*i+s[12],t[1]=s[1]*r+s[5]*i+s[13],t}function Z(t,e,s){const r=e[0],i=e[1],n=s[3]*r+s[7]*i||1;return t[0]=(s[0]*r+s[4]*i)/n,t[1]=(s[1]*r+s[5]*i)/n,t}function z(t,e,s){const r=e[0],i=e[1],n=e[2],h=s[3]*r+s[7]*i+s[11]*n||1;return t[0]=(s[0]*r+s[4]*i+s[8]*n)/h,t[1]=(s[1]*r+s[5]*i+s[9]*n)/h,t[2]=(s[2]*r+s[6]*i+s[10]*n)/h,t}function V(t,e,s){const r=e[0],i=e[1],n=e[2];return t[0]=s[0]*r+s[3]*i+s[6]*n,t[1]=s[1]*r+s[4]*i+s[7]*n,t[2]=s[2]*r+s[5]*i+s[8]*n,t[3]=e[3],t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),I=new Y(2),Y!=Float32Array&&(I[0]=0,I[1]=0);class K extends L{constructor(t=0,e=0){super(2),c(t)&&1===arguments.length?this.copy(t):(h.debug&&(_(t),_(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return h.debug&&(_(t.x),_(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return j(this,this,t),this.check()}transformAsVector(t){return Z(this,this,t),this.check()}transformByMatrix3(t){return C(this,this,t),this.check()}transformByMatrix2x3(t){return function(t,e,s){var r=e[0],i=e[1];t[0]=s[0]*r+s[2]*i+s[4],t[1]=s[1]*r+s[3]*i+s[5]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,s){var r=e[0],i=e[1];t[0]=s[0]*r+s[2]*i,t[1]=s[1]*r+s[3]*i}(this,this,t),this.check()}}function D(){var t=new Y(3);return Y!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function F(t){var e=t[0],s=t[1],r=t[2];return Math.hypot(e,s,r)}function X(t,e,s){var r=new Y(3);return r[0]=t,r[1]=e,r[2]=s,r}function q(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function W(t,e,s){var r=e[0],i=e[1],n=e[2],h=s[0],a=s[1],o=s[2];return t[0]=i*o-n*a,t[1]=n*h-r*o,t[2]=r*a-i*h,t}function B(t,e,s){var r=e[0],i=e[1],n=e[2],h=s[3]*r+s[7]*i+s[11]*n+s[15];return h=h||1,t[0]=(s[0]*r+s[4]*i+s[8]*n+s[12])/h,t[1]=(s[1]*r+s[5]*i+s[9]*n+s[13])/h,t[2]=(s[2]*r+s[6]*i+s[10]*n+s[14])/h,t}function Q(t,e,s){var r=e[0],i=e[1],n=e[2];return t[0]=r*s[0]+i*s[3]+n*s[6],t[1]=r*s[1]+i*s[4]+n*s[7],t[2]=r*s[2]+i*s[5]+n*s[8],t}function H(t,e,s){var r=s[0],i=s[1],n=s[2],h=s[3],a=e[0],o=e[1],c=e[2],u=i*c-n*o,l=n*a-r*c,f=r*o-i*a,d=i*f-n*l,g=n*u-r*f,p=r*l-i*u,y=2*h;return u*=y,l*=y,f*=y,d*=2,g*=2,p*=2,t[0]=a+u+d,t[1]=o+l+g,t[2]=c+f+p,t}var U=F;D();const $=[0,0,0],J={};class G extends L{static get ZERO(){return J.ZERO=J.ZERO||Object.freeze(new G(0,0,0,0))}constructor(t=0,e=0,s=0){super(-0,-0,-0),1===arguments.length&&c(t)?this.copy(t):(h.debug&&(_(t),_(e),_(s)),this[0]=t,this[1]=e,this[2]=s)}set(t,e,s){return this[0]=t,this[1]=e,this[2]=s,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return h.debug&&(_(t.x),_(t.y),_(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=_(t)}angle(t){return s=t,r=(e=this)[0],i=e[1],n=e[2],h=s[0],a=s[1],o=s[2],u=(c=Math.sqrt(r*r+i*i+n*n)*Math.sqrt(h*h+a*a+o*o))&&q(e,s)/c,Math.acos(Math.min(Math.max(u,-1),1));var e,s,r,i,n,h,a,o,c,u}cross(t){return W(this,this,t),this.check()}rotateX({radians:t,origin:e=$}){return function(t,e,s,r){var i=[],n=[];i[0]=e[0]-s[0],i[1]=e[1]-s[1],i[2]=e[2]-s[2],n[0]=i[0],n[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),n[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=$}){return function(t,e,s,r){var i=[],n=[];i[0]=e[0]-s[0],i[1]=e[1]-s[1],i[2]=e[2]-s[2],n[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),n[1]=i[1],n[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=$}){return function(t,e,s,r){var i=[],n=[];i[0]=e[0]-s[0],i[1]=e[1]-s[1],i[2]=e[2]-s[2],n[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),n[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),n[2]=i[2],t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return B(this,this,t),this.check()}transformAsVector(t){return z(this,this,t),this.check()}transformByMatrix3(t){return Q(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,s){const r=e[0],i=e[1];t[0]=s[0]*r+s[2]*i,t[1]=s[1]*r+s[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return H(this,this,t),this.check()}}const tt={};class et extends L{static get ZERO(){return tt.ZERO=tt.ZERO||Object.freeze(new et(0,0,0,0))}constructor(t=0,e=0,s=0,r=0){super(-0,-0,-0,-0),c(t)&&1===arguments.length?this.copy(t):(h.debug&&(_(t),_(e),_(s),_(r)),this[0]=t,this[1]=e,this[2]=s,this[3]=r)}set(t,e,s,r){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return h.debug&&(_(t.x),_(t.y),_(t.z),_(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=_(t)}get w(){return this[3]}set w(t){this[3]=_(t)}transform(t){return B(this,this,t),this.check()}transformByMatrix3(t){return V(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,s){const r=e[0],i=e[1];t[0]=s[0]*r+s[2]*i,t[1]=s[1]*r+s[3]*i,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return H(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class st extends P{get ELEMENTS(){return r(!1),0}get RANK(){return r(!1),0}toString(){let t="[";if(h.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let s=0;s<this.RANK;++s)t+=" ".concat(this[s*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,s){return this[e*this.RANK+t]=_(s),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const s=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[s+t];return e}setColumn(t,e){const s=t*this.RANK;for(let t=0;t<this.RANK;++t)this[s+t]=e[t];return this}}function rt(t,e,s){var r=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=s[0],d=s[1],g=s[2],p=s[3],y=s[4],m=s[5],M=s[6],E=s[7],x=s[8];return t[0]=f*r+d*h+g*c,t[1]=f*i+d*a+g*u,t[2]=f*n+d*o+g*l,t[3]=p*r+y*h+m*c,t[4]=p*i+y*a+m*u,t[5]=p*n+y*o+m*l,t[6]=M*r+E*h+x*c,t[7]=M*i+E*a+x*u,t[8]=M*n+E*o+x*l,t}function it(t,e,s){var r=s[0],i=s[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}const nt=Object.freeze([1,0,0,0,1,0,0,0,1]),ht=Object.freeze([0,0,0,0,0,0,0,0,0]),at=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),ot={};class ct extends st{static get IDENTITY(){return ot.IDENTITY=ot.IDENTITY||Object.freeze(new ct(nt)),ot.IDENTITY}static get ZERO(){return ot.ZERO=ot.ZERO||Object.freeze(new ct(ht)),ot.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return at}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}set(t,e,s,r,i,n,h,a,o){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this[4]=i,this[5]=n,this[6]=h,this[7]=a,this[8]=o,this.check()}setRowMajor(t,e,s,r,i,n,h,a,o){return this[0]=t,this[1]=r,this[2]=h,this[3]=e,this[4]=i,this[5]=a,this[6]=s,this[7]=n,this[8]=o,this.check()}determinant(){return e=(t=this)[0],s=t[1],r=t[2],i=t[3],n=t[4],h=t[5],a=t[6],o=t[7],e*((c=t[8])*n-h*o)+s*(-c*i+h*a)+r*(o*i-n*a);var t,e,s,r,i,n,h,a,o,c}identity(){return this.copy(nt)}fromQuaternion(t){return function(t,e){var s=e[0],r=e[1],i=e[2],n=e[3],h=s+s,a=r+r,o=i+i,c=s*h,u=r*h,l=r*a,f=i*h,d=i*a,g=i*o,p=n*h,y=n*a,m=n*o;t[0]=1-l-g,t[3]=u-m,t[6]=f+y,t[1]=u+m,t[4]=1-c-g,t[7]=d-p,t[2]=f-y,t[5]=d+p,t[8]=1-c-l}(this,t),this.check()}transpose(){return function(t,e){if(t===e){var s=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=s,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var s=e[0],r=e[1],i=e[2],n=e[3],h=e[4],a=e[5],o=e[6],c=e[7],u=e[8],l=u*h-a*c,f=-u*n+a*o,d=c*n-h*o,g=s*l+r*f+i*d;g&&(g=1/g,t[0]=l*g,t[1]=(-u*r+i*c)*g,t[2]=(a*r-i*h)*g,t[3]=f*g,t[4]=(u*s-i*o)*g,t[5]=(-a*s+i*n)*g,t[6]=d*g,t[7]=(-c*s+r*o)*g,t[8]=(h*s-r*n)*g)}(this,this),this.check()}multiplyLeft(t){return rt(this,t,this),this.check()}multiplyRight(t){return rt(this,this,t),this.check()}rotate(t){return function(t,e,s){var r=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=Math.sin(s),d=Math.cos(s);t[0]=d*r+f*h,t[1]=d*i+f*a,t[2]=d*n+f*o,t[3]=d*h-f*r,t[4]=d*a-f*i,t[5]=d*o-f*n,t[6]=c,t[7]=u,t[8]=l}(this,this,t),this.check()}scale(t){return Array.isArray(t)?it(this,this,t):it(this,this,[t,t,t]),this.check()}translate(t){return function(t,e,s){var r=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=s[0],d=s[1];t[0]=r,t[1]=i,t[2]=n,t[3]=h,t[4]=a,t[5]=o,t[6]=f*r+d*h+c,t[7]=f*i+d*a+u,t[8]=f*n+d*o+l}(this,this,t),this.check()}transform(t,e){switch(t.length){case 2:e=C(e||[-0,-0],t,this);break;case 3:e=Q(e||[-0,-0,-0],t,this);break;case 4:e=V(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return N(e,t.length),e}transformVector(t,e){return A("Matrix3.transformVector"),this.transform(t,e)}transformVector2(t,e){return A("Matrix3.transformVector"),this.transform(t,e)}transformVector3(t,e){return A("Matrix3.transformVector"),this.transform(t,e)}}function ut(t,e,s){var r=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=e[9],d=e[10],g=e[11],p=e[12],y=e[13],m=e[14],M=e[15],E=s[0],x=s[1],w=s[2],b=s[3];return t[0]=E*r+x*a+w*l+b*p,t[1]=E*i+x*o+w*f+b*y,t[2]=E*n+x*c+w*d+b*m,t[3]=E*h+x*u+w*g+b*M,E=s[4],x=s[5],w=s[6],b=s[7],t[4]=E*r+x*a+w*l+b*p,t[5]=E*i+x*o+w*f+b*y,t[6]=E*n+x*c+w*d+b*m,t[7]=E*h+x*u+w*g+b*M,E=s[8],x=s[9],w=s[10],b=s[11],t[8]=E*r+x*a+w*l+b*p,t[9]=E*i+x*o+w*f+b*y,t[10]=E*n+x*c+w*d+b*m,t[11]=E*h+x*u+w*g+b*M,E=s[12],x=s[13],w=s[14],b=s[15],t[12]=E*r+x*a+w*l+b*p,t[13]=E*i+x*o+w*f+b*y,t[14]=E*n+x*c+w*d+b*m,t[15]=E*h+x*u+w*g+b*M,t}function lt(t,e,s){var r=s[0],i=s[1],n=s[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}!function(){var t=new Y(4);Y!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const ft=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),dt=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),gt=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),pt={};class yt extends st{static get IDENTITY(){return pt.IDENTITY=pt.IDENTITY||Object.freeze(new yt(ft)),pt.IDENTITY}static get ZERO(){return pt.ZERO=pt.ZERO||Object.freeze(new yt(dt)),pt.ZERO}get INDICES(){return gt}get ELEMENTS(){return 16}get RANK(){return 4}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,s,r,i,n,h,a,o,c,u,l,f,d,g,p){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this[4]=i,this[5]=n,this[6]=h,this[7]=a,this[8]=o,this[9]=c,this[10]=u,this[11]=l,this[12]=f,this[13]=d,this[14]=g,this[15]=p,this.check()}setRowMajor(t,e,s,r,i,n,h,a,o,c,u,l,f,d,g,p){return this[0]=t,this[1]=i,this[2]=o,this[3]=f,this[4]=e,this[5]=n,this[6]=c,this[7]=d,this[8]=s,this[9]=h,this[10]=u,this[11]=g,this[12]=r,this[13]=a,this[14]=l,this[15]=p,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(ft)}fromQuaternion(t){return function(t,e){var s=e[0],r=e[1],i=e[2],n=e[3],h=s+s,a=r+r,o=i+i,c=s*h,u=r*h,l=r*a,f=i*h,d=i*a,g=i*o,p=n*h,y=n*a,m=n*o;t[0]=1-l-g,t[1]=u+m,t[2]=f-y,t[3]=0,t[4]=u-m,t[5]=1-c-g,t[6]=d+p,t[7]=0,t[8]=f+y,t[9]=d-p,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum({left:t,right:e,bottom:s,top:r,near:i,far:n}){return n===1/0?yt._computeInfinitePerspectiveOffCenter(this,t,e,s,r,i):function(t,e,s,r,i,n,h){var a=1/(s-e),o=1/(i-r),c=1/(n-h);t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*o,t[6]=0,t[7]=0,t[8]=(s+e)*a,t[9]=(i+r)*o,t[10]=(h+n)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*n*2*c,t[15]=0}(this,t,e,s,r,i,n),this.check()}static _computeInfinitePerspectiveOffCenter(t,e,s,r,i,n){const h=2*n/(s-e),a=2*n/(i-r),o=(s+e)/(s-e),c=(i+r)/(i-r),u=-2*n;return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=o,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0,t}lookAt(t,e,s){return 1===arguments.length&&({eye:t,center:e,up:s}=t),function(t,e,s,r){var i,n,h,a,o,c,u,l,f,d,g=e[0],p=e[1],y=e[2],m=r[0],M=r[1],E=r[2],x=s[0],w=s[1],b=s[2];Math.abs(g-x)<T&&Math.abs(p-w)<T&&Math.abs(y-b)<T?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=g-x,l=p-w,f=y-b,i=M*(f*=d=1/Math.hypot(u,l,f))-E*(l*=d),n=E*(u*=d)-m*f,h=m*l-M*u,(d=Math.hypot(i,n,h))?(i*=d=1/d,n*=d,h*=d):(i=0,n=0,h=0),a=l*h-f*n,o=f*i-u*h,c=u*n-l*i,(d=Math.hypot(a,o,c))?(a*=d=1/d,o*=d,c*=d):(a=0,o=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=n,t[5]=o,t[6]=l,t[7]=0,t[8]=h,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*g+n*p+h*y),t[13]=-(a*g+o*p+c*y),t[14]=-(u*g+l*p+f*y),t[15]=1)}(this,t,e=e||[0,0,0],s=s||[0,1,0]),this.check()}ortho({left:t,right:e,bottom:s,top:r,near:i=.1,far:n=500}){return function(t,e,s,r,i,n,h){var a=1/(e-s),o=1/(r-i),c=1/(n-h);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+s)*a,t[13]=(i+r)*o,t[14]=(h+n)*c,t[15]=1}(this,t,e,s,r,i,n),this.check()}orthographic({fovy:t=45*Math.PI/180,aspect:e=1,focalDistance:s=1,near:r=.1,far:i=500}){if(t>2*Math.PI)throw Error("radians");const n=t/2,h=s*Math.tan(n),a=h*e;return(new yt).ortho({left:-a,right:a,bottom:-h,top:h,near:r,far:i})}perspective({fovy:t,fov:e=45*Math.PI/180,aspect:s=1,near:r=.1,far:i=500}={}){if((t=t||e)>2*Math.PI)throw Error("radians");return function(t,e,s,r,i){var n,h=1/Math.tan(e/2);t[0]=h/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(n=1/(r-i),t[10]=(i+r)*n,t[14]=2*i*r*n):(t[10]=-1,t[14]=-2*r)}(this,t,s,r,i),this.check()}determinant(){return e=(t=this)[0],s=t[1],r=t[2],i=t[3],n=t[4],h=t[5],a=t[6],o=t[7],c=t[8],u=t[9],l=t[10],f=t[11],d=t[12],g=t[13],p=t[14],(e*h-s*n)*(l*(y=t[15])-f*p)-(e*a-r*n)*(u*y-f*g)+(e*o-i*n)*(u*p-l*g)+(s*a-r*h)*(c*y-f*d)-(s*o-i*h)*(c*p-l*d)+(r*o-i*a)*(c*g-u*d);var t,e,s,r,i,n,h,a,o,c,u,l,f,d,g,p,y}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const s=this.getScale(e||[-0,-0,-0]),r=1/s[0],i=1/s[1],n=1/s[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*n,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*n,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const s=this.getScale(e||[-0,-0,-0]),r=1/s[0],i=1/s[1],n=1/s[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*n,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*n,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*n,t}transpose(){return function(t,e){if(t===e){var s=e[1],r=e[2],i=e[3],n=e[6],h=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=i,t[13]=h,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return function(t,e){var s=e[0],r=e[1],i=e[2],n=e[3],h=e[4],a=e[5],o=e[6],c=e[7],u=e[8],l=e[9],f=e[10],d=e[11],g=e[12],p=e[13],y=e[14],m=e[15],M=s*a-r*h,E=s*o-i*h,x=s*c-n*h,w=r*o-i*a,b=r*c-n*a,O=i*c-n*o,v=u*p-l*g,S=u*y-f*g,k=u*m-d*g,P=l*y-f*p,_=l*m-d*p,N=f*m-d*y,R=M*N-E*_+x*P+w*k-b*S+O*v;R&&(R=1/R,t[0]=(a*N-o*_+c*P)*R,t[1]=(i*_-r*N-n*P)*R,t[2]=(p*O-y*b+m*w)*R,t[3]=(f*b-l*O-d*w)*R,t[4]=(o*k-h*N-c*S)*R,t[5]=(s*N-i*k+n*S)*R,t[6]=(y*x-g*O-m*E)*R,t[7]=(u*O-f*x+d*E)*R,t[8]=(h*_-a*k+c*v)*R,t[9]=(r*k-s*_-n*v)*R,t[10]=(g*b-p*x+m*M)*R,t[11]=(l*x-u*b-d*M)*R,t[12]=(a*S-h*P-o*v)*R,t[13]=(s*P-r*S+i*v)*R,t[14]=(p*E-g*w-y*M)*R,t[15]=(u*w-l*E+f*M)*R)}(this,this),this.check()}multiplyLeft(t){return ut(this,t,this),this.check()}multiplyRight(t){return ut(this,this,t),this.check()}rotateX(t){return function(t,e,s){var r=Math.sin(s),i=Math.cos(s),n=e[4],h=e[5],a=e[6],o=e[7],c=e[8],u=e[9],l=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*i+c*r,t[5]=h*i+u*r,t[6]=a*i+l*r,t[7]=o*i+f*r,t[8]=c*i-n*r,t[9]=u*i-h*r,t[10]=l*i-a*r,t[11]=f*i-o*r}(this,this,t),this.check()}rotateY(t){return function(t,e,s){var r=Math.sin(s),i=Math.cos(s),n=e[0],h=e[1],a=e[2],o=e[3],c=e[8],u=e[9],l=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*i-c*r,t[1]=h*i-u*r,t[2]=a*i-l*r,t[3]=o*i-f*r,t[8]=n*r+c*i,t[9]=h*r+u*i,t[10]=a*r+l*i,t[11]=o*r+f*i}(this,this,t),this.check()}rotateZ(t){return function(t,e,s){var r=Math.sin(s),i=Math.cos(s),n=e[0],h=e[1],a=e[2],o=e[3],c=e[4],u=e[5],l=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*i+c*r,t[1]=h*i+u*r,t[2]=a*i+l*r,t[3]=o*i+f*r,t[4]=c*i-n*r,t[5]=u*i-h*r,t[6]=l*i-a*r,t[7]=f*i-o*r}(this,this,t),this.check()}rotateXYZ([t,e,s]){return this.rotateX(t).rotateY(e).rotateZ(s)}rotateAxis(t,e){return function(t,e,s,r){var i,n,h,a,o,c,u,l,f,d,g,p,y,m,M,E,x,w,b,O,v,S,k,P,_=r[0],N=r[1],R=r[2],A=Math.hypot(_,N,R);A<T||(_*=A=1/A,N*=A,R*=A,i=Math.sin(s),h=1-(n=Math.cos(s)),a=e[0],o=e[1],c=e[2],u=e[3],l=e[4],f=e[5],d=e[6],g=e[7],p=e[8],y=e[9],m=e[10],M=e[11],E=_*_*h+n,x=N*_*h+R*i,w=R*_*h-N*i,b=_*N*h-R*i,O=N*N*h+n,v=R*N*h+_*i,S=_*R*h+N*i,k=N*R*h-_*i,P=R*R*h+n,t[0]=a*E+l*x+p*w,t[1]=o*E+f*x+y*w,t[2]=c*E+d*x+m*w,t[3]=u*E+g*x+M*w,t[4]=a*b+l*O+p*v,t[5]=o*b+f*O+y*v,t[6]=c*b+d*O+m*v,t[7]=u*b+g*O+M*v,t[8]=a*S+l*k+p*P,t[9]=o*S+f*k+y*P,t[10]=c*S+d*k+m*P,t[11]=u*S+g*k+M*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return Array.isArray(t)?lt(this,this,t):lt(this,this,[t,t,t]),this.check()}translate(t){return function(t,e,s){var r,i,n,h,a,o,c,u,l,f,d,g,p=s[0],y=s[1],m=s[2];e===t?(t[12]=e[0]*p+e[4]*y+e[8]*m+e[12],t[13]=e[1]*p+e[5]*y+e[9]*m+e[13],t[14]=e[2]*p+e[6]*y+e[10]*m+e[14],t[15]=e[3]*p+e[7]*y+e[11]*m+e[15]):(r=e[0],i=e[1],n=e[2],h=e[3],a=e[4],o=e[5],c=e[6],u=e[7],l=e[8],f=e[9],d=e[10],g=e[11],t[0]=r,t[1]=i,t[2]=n,t[3]=h,t[4]=a,t[5]=o,t[6]=c,t[7]=u,t[8]=l,t[9]=f,t[10]=d,t[11]=g,t[12]=r*p+a*y+l*m+e[12],t[13]=i*p+o*y+f*m+e[13],t[14]=n*p+c*y+d*m+e[14],t[15]=h*p+u*y+g*m+e[15])}(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=function(t,e,s){var r=e[0],i=e[1],n=e[2],h=e[3];return t[0]=s[0]*r+s[4]*i+s[8]*n+s[12]*h,t[1]=s[1]*r+s[5]*i+s[9]*n+s[13]*h,t[2]=s[2]*r+s[6]*i+s[10]*n+s[14]*h,t[3]=s[3]*r+s[7]*i+s[11]*n+s[15]*h,t}(e||[-0,-0,-0,-0],t,this),N(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:s}=t;switch(s){case 2:e=j(e||[-0,-0],t,this);break;case 3:e=B(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return N(e,t.length),e}transformAsVector(t,e){switch(t.length){case 2:e=Z(e||[-0,-0],t,this);break;case 3:e=z(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return N(e,t.length),e}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,s){return this.identity().translate([t,e,s])}transformPoint(t,e){return A("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}transformVector(t,e){return A("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}transformDirection(t,e){return A("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}function mt(){var t=new Y(4);return Y!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Mt(t,e,s){s*=.5;var r=Math.sin(s);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(s),t}function Et(t,e,s){var r=e[0],i=e[1],n=e[2],h=e[3],a=s[0],o=s[1],c=s[2],u=s[3];return t[0]=r*u+h*a+i*c-n*o,t[1]=i*u+h*o+n*a-r*c,t[2]=n*u+h*c+r*o-i*a,t[3]=h*u-r*a-i*o-n*c,t}var xt,wt,bt,Ot=function(t){var e=t[0],s=t[1],r=t[2],i=t[3];return Math.hypot(e,s,r,i)},vt=function(t){var e=t[0],s=t[1],r=t[2],i=t[3];return e*e+s*s+r*r+i*i},St=(xt=D(),wt=X(1,0,0),bt=X(0,1,0),function(t,e,s){var r=q(e,s);return r<-.999999?(W(xt,wt,e),U(xt)<1e-6&&W(xt,bt,e),function(t,e){var s=e[0],r=e[1],i=e[2],n=s*s+r*r+i*i;n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}(xt,xt),Mt(t,xt,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(W(xt,e,s),t[0]=xt[0],t[1]=xt[1],t[2]=xt[2],t[3]=1+r,function(t,e){var s=e[0],r=e[1],i=e[2],n=e[3],h=s*s+r*r+i*i+n*n;return h>0&&(h=1/Math.sqrt(h)),t[0]=s*h,t[1]=r*h,t[2]=i*h,t[3]=n*h,t}(t,t))});mt(),mt(),function(){var t=new Y(9);Y!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const kt=[0,0,0,1];class Pt extends P{constructor(t=0,e=0,s=0,r=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,s,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,s,r){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this.check()}fromMatrix3(t){return function(t,e){var s,r=e[0]+e[4]+e[8];if(r>0)s=Math.sqrt(r+1),t[3]=.5*s,s=.5/s,t[0]=(e[5]-e[7])*s,t[1]=(e[6]-e[2])*s,t[2]=(e[1]-e[3])*s;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var n=(i+1)%3,h=(i+2)%3;s=Math.sqrt(e[3*i+i]-e[3*n+n]-e[3*h+h]+1),t[i]=.5*s,s=.5/s,t[3]=(e[3*n+h]-e[3*h+n])*s,t[n]=(e[3*n+i]+e[3*i+n])*s,t[h]=(e[3*h+i]+e[3*i+h])*s}}(this,t),this.check()}identity(){return function(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}fromAxisRotation(t,e){return Mt(this,t,e),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=_(t)}get y(){return this[1]}set y(t){this[1]=_(t)}get z(){return this[2]}set z(t){this[2]=_(t)}get w(){return this[3]}set w(t){this[3]=_(t)}len(){return Ot(this)}lengthSquared(){return vt(this)}dot(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,t)}rotationTo(t,e){return St(this,t,e),this.check()}add(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return function(t,e,s){t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3]}(this,this,t),this.check()}calculateW(){return function(t,e){var s=e[0],r=e[1],i=e[2];t[0]=s,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-s*s-r*r-i*i))}(this,this),this.check()}conjugate(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function(t,e){var s=e[0],r=e[1],i=e[2],n=e[3],h=s*s+r*r+i*i+n*n,a=h?1/h:0;t[0]=-s*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a}(this,this),this.check()}lerp(t,e,s){return function(t,e,s,r){var i=e[0],n=e[1],h=e[2],a=e[3];t[0]=i+r*(s[0]-i),t[1]=n+r*(s[1]-n),t[2]=h+r*(s[2]-h),t[3]=a+r*(s[3]-a)}(this,t,e,s),this.check()}multiplyRight(t,e){return r(!e),Et(this,this,t),this.check()}multiplyLeft(t,e){return r(!e),Et(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,s){s*=.5;var r=e[0],i=e[1],n=e[2],h=e[3],a=Math.sin(s),o=Math.cos(s);t[0]=r*o+h*a,t[1]=i*o+n*a,t[2]=n*o-i*a,t[3]=h*o-r*a}(this,this,t),this.check()}rotateY(t){return function(t,e,s){s*=.5;var r=e[0],i=e[1],n=e[2],h=e[3],a=Math.sin(s),o=Math.cos(s);t[0]=r*o-n*a,t[1]=i*o+h*a,t[2]=n*o+r*a,t[3]=h*o-i*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,s){s*=.5;var r=e[0],i=e[1],n=e[2],h=e[3],a=Math.sin(s),o=Math.cos(s);t[0]=r*o+i*a,t[1]=i*o-r*a,t[2]=n*o+h*a,t[3]=h*o-n*a}(this,this,t),this.check()}scale(t){return function(t,e,s){t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s}(this,this,t),this.check()}slerp(t,e,s){switch(arguments.length){case 1:({start:t=kt,target:e,ratio:s}=arguments[0]);break;case 2:[e,s]=arguments,t=this}return function(t,e,s,r){var i,n,h,a,o,c=e[0],u=e[1],l=e[2],f=e[3],d=s[0],g=s[1],p=s[2],y=s[3];(n=c*d+u*g+l*p+f*y)<0&&(n=-n,d=-d,g=-g,p=-p,y=-y),1-n>T?(i=Math.acos(n),h=Math.sin(i),a=Math.sin((1-r)*i)/h,o=Math.sin(r*i)/h):(a=1-r,o=r),t[0]=a*c+o*d,t[1]=a*u+o*g,t[2]=a*l+o*p,t[3]=a*f+o*y}(this,t,e,s),this.check()}transformVector4(t,e=t){return function(t,e,s){var r=e[0],i=e[1],n=e[2],h=s[0],a=s[1],o=s[2],c=s[3],u=c*r+a*n-o*i,l=c*i+o*r-h*n,f=c*n+h*i-a*r,d=-h*r-a*i-o*n;t[0]=u*c+d*-h+l*-o-f*-a,t[1]=l*c+d*-a+f*-h-u*-o,t[2]=f*c+d*-o+u*-a-l*-h,t[3]=e[3]}(e,t,this),N(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t,e){return this.multiplyLeft(t,e)}multiply(t,e){return this.multiplyRight(t,e)}}const _t={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},Nt=1e-6;class Rt{constructor({phi:t=0,theta:e=0,radius:s=1,bearing:r,pitch:i,altitude:n,radiusScale:h=6371e3}={}){this.phi=t,this.theta=e,this.radius=s||n||1,this.radiusScale=h||1,void 0!==r&&(this.bearing=r),void 0!==i&&(this.pitch=i),this.check()}toString(){return this.formatString(h)}formatString({printTypes:t=!1}){const e=o;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return v(this.radius,t.radius)&&v(this.theta,t.theta)&&v(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-p(this.phi)}set bearing(t){this.phi=Math.PI-g(t)}get pitch(){return p(this.theta)}set pitch(t){this.theta=g(t)}get longitude(){return p(this.phi)}get latitude(){return p(this.theta)}get lng(){return p(this.phi)}get lat(){return p(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,s){return this.radius=t,this.phi=e,this.theta=s,this.check()}clone(){return(new Rt).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,s]){this.radius=1+s/this.radiusScale,this.phi=g(e),this.theta=g(t)}fromVector3(t){return this.radius=F(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(b(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new G(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(Nt,Math.min(Math.PI-Nt,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}const At="Unknown Euler angle order",Lt=.99999;class It extends P{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return It.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(t){return It.RotationOrders[t]}get ELEMENTS(){return 4}constructor(t=0,e=0,s=0,r=It.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(t,e,s,r)}fromQuaternion(t){const[e,s,r,i]=t,n=s*s,h=-2*(n+r*r)+1,a=2*(e*s+i*r);let o=-2*(e*r-i*s);const c=2*(s*r+i*e),u=-2*(e*e+n)+1;o=o>1?1:o,o=o<-1?-1:o;const l=Math.atan2(c,u),f=Math.asin(o),d=Math.atan2(a,h);return new It(l,f,d,It.RollPitchYaw)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}set(t=0,e=0,s=0,r){return this[0]=t,this[1]=e,this[2]=s,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return(t=this[3])>=0&&t<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var t}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}toArray4(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}toVector3(t=[-0,-0,-0]){return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}get x(){return this[0]}set x(t){this[0]=_(t)}get y(){return this[1]}set y(t){this[1]=_(t)}get z(){return this[2]}set z(t){this[2]=_(t)}get alpha(){return this[0]}set alpha(t){this[0]=_(t)}get beta(){return this[1]}set beta(t){this[1]=_(t)}get gamma(){return this[2]}set gamma(t){this[2]=_(t)}get phi(){return this[0]}set phi(t){this[0]=_(t)}get theta(){return this[1]}set theta(t){this[1]=_(t)}get psi(){return this[2]}set psi(t){this[2]=_(t)}get roll(){return this[0]}set roll(t){this[0]=_(t)}get pitch(){return this[1]}set pitch(t){this[1]=_(t)}get yaw(){return this[2]}set yaw(t){this[2]=_(t)}get order(){return this[3]}set order(t){this[3]=function(t){if(t<0&&t>=6)throw new Error(At);return t}(t)}fromVector3(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}fromArray(t,e=0){return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}fromRollPitchYaw(t,e,s){return this.set(t,e,s,It.ZYX)}fromRotationMatrix(t,e=It.DefaultOrder){return this._fromRotationMatrix(t,e),this.check()}getRotationMatrix(t){return this._getRotationMatrix(t)}getQuaternion(){const t=new Pt;switch(this[3]){case It.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case It.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case It.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case It.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case It.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case It.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(At)}}_fromRotationMatrix(t,e=It.DefaultOrder){const s=t.elements,r=s[0],i=s[4],n=s[8],h=s[1],a=s[5],o=s[9],c=s[2],u=s[6],l=s[10];switch(e=e||this[3]){case It.XYZ:this[1]=Math.asin(b(n,-1,1)),Math.abs(n)<Lt?(this[0]=Math.atan2(-o,l),this[2]=Math.atan2(-i,r)):(this[0]=Math.atan2(u,a),this[2]=0);break;case It.YXZ:this[0]=Math.asin(-b(o,-1,1)),Math.abs(o)<Lt?(this[1]=Math.atan2(n,l),this[2]=Math.atan2(h,a)):(this[1]=Math.atan2(-c,r),this[2]=0);break;case It.ZXY:this[0]=Math.asin(b(u,-1,1)),Math.abs(u)<Lt?(this[1]=Math.atan2(-c,l),this[2]=Math.atan2(-i,a)):(this[1]=0,this[2]=Math.atan2(h,r));break;case It.ZYX:this[1]=Math.asin(-b(c,-1,1)),Math.abs(c)<Lt?(this[0]=Math.atan2(u,l),this[2]=Math.atan2(h,r)):(this[0]=0,this[2]=Math.atan2(-i,a));break;case It.YZX:this[2]=Math.asin(b(h,-1,1)),Math.abs(h)<Lt?(this[0]=Math.atan2(-o,a),this[1]=Math.atan2(-c,r)):(this[0]=0,this[1]=Math.atan2(n,l));break;case It.XZY:this[2]=Math.asin(-b(i,-1,1)),Math.abs(i)<Lt?(this[0]=Math.atan2(u,a),this[1]=Math.atan2(n,r)):(this[0]=Math.atan2(-o,l),this[1]=0);break;default:throw new Error(At)}return this[3]=e,this}_getRotationMatrix(t){const e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],s=this.x,r=this.y,i=this.z,n=Math.cos(s),h=Math.cos(r),a=Math.cos(i),o=Math.sin(s),c=Math.sin(r),u=Math.sin(i);switch(this[3]){case It.XYZ:{const t=n*a,s=n*u,r=o*a,i=o*u;e[0]=h*a,e[4]=-h*u,e[8]=c,e[1]=s+r*c,e[5]=t-i*c,e[9]=-o*h,e[2]=i-t*c,e[6]=r+s*c,e[10]=n*h;break}case It.YXZ:{const t=h*a,s=h*u,r=c*a,i=c*u;e[0]=t+i*o,e[4]=r*o-s,e[8]=n*c,e[1]=n*u,e[5]=n*a,e[9]=-o,e[2]=s*o-r,e[6]=i+t*o,e[10]=n*h;break}case It.ZXY:{const t=h*a,s=h*u,r=c*a,i=c*u;e[0]=t-i*o,e[4]=-n*u,e[8]=r+s*o,e[1]=s+r*o,e[5]=n*a,e[9]=i-t*o,e[2]=-n*c,e[6]=o,e[10]=n*h;break}case It.ZYX:{const t=n*a,s=n*u,r=o*a,i=o*u;e[0]=h*a,e[4]=r*c-s,e[8]=t*c+i,e[1]=h*u,e[5]=i*c+t,e[9]=s*c-r,e[2]=-c,e[6]=o*h,e[10]=n*h;break}case It.YZX:{const t=n*h,s=n*c,r=o*h,i=o*c;e[0]=h*a,e[4]=i-t*u,e[8]=r*u+s,e[1]=u,e[5]=n*a,e[9]=-o*a,e[2]=-c*a,e[6]=s*u+r,e[10]=t-i*u;break}case It.XZY:{const t=n*h,s=n*c,r=o*h,i=o*c;e[0]=h*a,e[4]=-u,e[8]=c*a,e[1]=t*u+i,e[5]=n*a,e[9]=s*u-r,e[2]=r*u-s,e[6]=o*a,e[10]=i*u+t;break}default:throw new Error(At)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}toQuaternion(){const t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),s=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),n=Math.sin(.5*this.pitch);return new Pt(t*r*i-e*s*n,t*s*n+e*r*i,e*s*i-t*r*n,t*s*i+e*r*n)}}class Tt{constructor({x:t=0,y:e=0,z:s=0,roll:r=0,pitch:i=0,yaw:n=0,position:h,orientation:a}={}){Array.isArray(h)&&3===h.length?this.position=new G(h):this.position=new G(t,e,s),Array.isArray(a)&&4===a.length?this.orientation=new It(a,a[3]):this.orientation=new It(r,i,n,It.RollPitchYaw)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get z(){return this.position.z}set z(t){this.position.z=t}get roll(){return this.orientation.roll}set roll(t){this.orientation.roll=t}get pitch(){return this.orientation.pitch}set pitch(t){this.orientation.pitch=t}get yaw(){return this.orientation.yaw}set yaw(t){this.orientation.yaw=t}getPosition(){return this.position}getOrientation(){return this.orientation}equals(t){return!!t&&this.position.equals(t.position)&&this.orientation.equals(t.orientation)}exactEquals(t){return!!t&&this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation)}getTransformationMatrix(){const t=Math.sin(this.roll),e=Math.sin(this.pitch),s=Math.sin(this.yaw),r=Math.cos(this.roll),i=Math.cos(this.pitch),n=Math.cos(this.yaw);return(new yt).setRowMajor(n*i,-s*r+n*e*t,s*t+n*e*r,this.x,s*i,n*r+s*e*t,-n*t+s*e*r,this.y,-e,i*t,i*r,this.z,0,0,0,1)}getTransformationMatrixFromPose(t){return(new yt).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}getTransformationMatrixToPose(t){return(new yt).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}const Yt="undefined"!=typeof self&&self,Ct="undefined"!=typeof window&&window;(void 0!==s.g&&s.g||Yt||Ct).mathgl={config:h}},434:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.uri=t}async getImageData(){return this.loadFile().then((async t=>{const e=await createImageBitmap(t),s=document.createElement("canvas"),r=s.getContext("2d");return s.width=e.width,s.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,s.width,s.height).data}))}async loadFile(){const t=await fetch(this.uri),e=await t.blob();return new File([e],"bitmap.png",e)}}},862:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(s(974)),n=r(s(486)),h=r(s(291));class a extends n.default{constructor(t,e){super(t,e),this.lastTime=(new Date).getTime(),this.unprocessedFrames=0,this.width=t,this.height=e,this.context=this.getCanvasInstance(),this.gameScreen=new h.default(this.context),this.run()}run(){i.default.disableImageSmoothing(this.context),this.gameScreen.init(),window.requestAnimationFrame((()=>this.tick()))}tick(){i.default.clearRect(this.context,this.width,this.height);const t=(new Date).getTime();for(this.unprocessedFrames+=60*(t-this.lastTime)*1e3,this.unprocessedFrames>10&&(this.unprocessedFrames=10);this.unprocessedFrames>1;)this.gameScreen.tick(),this.unprocessedFrames--;this.render(),window.requestAnimationFrame((()=>this.tick()))}render(){this.gameScreen.render()}}new a(800,416)},319:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(648),n=r(s(974)),h=r(s(777)),a=r(s(335)),o=r(s(126)),c=r(s(434)),u=r(s(134));class l{constructor(t){this.renderables=new Array,this.collidables=new Array,this.pixels=new Array,this.bitmap=new c.default("../../assets/img/bitmap.png"),this.context=t}init(){this.loadPixels(),this.addBlocks()}addBlocks(){this.loadPixels().then((()=>{this.pixels.forEach((t=>{switch(t.colorHex){case 4278190335:this.add(new h.default(t.pos,new i.Vector2(32,32)));break;case 16711935:this.add(new o.default(t.pos,new i.Vector2(32,32)));break;case 65535:this.add(new a.default(t.pos,new i.Vector2(32,32)))}}))}))}add(t){return this.renderables.push(t),"isCollidable"in t?(this.collidables.push(t),t):t}getAllRenderables(){return this.renderables}getAllCollidables(){return this.collidables}render(){n.default.disableImageSmoothing(this.context),this.getAllRenderables().forEach((t=>t.render(this.context)))}async loadPixels(){return this.bitmap.getImageData().then((t=>{const e=new i.Vector2(0,0);for(let s=4;s<=t.length;s+=4){const r=Array.from(t.subarray(s-4,s));e.x>=25&&(e.x=0,e.y++),this.pixels.push(new u.default(new i.Vector2(e.x,e.y),new i.Vector4(r))),e.x++}this.pixels=this.pixels.filter(((t,e,s)=>e===s.findIndex((e=>e.pos.equals(t.pos.elements)))))}))}}e.default=l,l.OFFSET=32},134:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(s(6));e.default=class{constructor(t,e){this.pos=t,this.color=e,this.colorHex=i.default.rgba2Hex(e)}}},443:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.width=0,this.height=0,this.loaded=!0,this.url=t}load(){const t=new Image;return t.onload=e=>{this.width=t.width,this.height=t.height,this.loaded=!0},t.src=this.url?this.url:"",t}}},478:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(s(974)),n=r(s(6)),h=r(s(443));e.default=class{constructor(t,e,s,r,i){this.spriteSheet=new h.default("../assets/img/blocks.png"),this.sPos=t,this.sSize=e,this.pos=s.multiplyByScalar(32),this.size=r,this.color=i,this.hexColor=n.default.rgba2Hex(i),this.isCollidable=!0}render(t){const e=this.spriteSheet.load();i.default.drawImage(t,e,this.sPos,this.sSize,this.pos,this.size)}}},777:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(648),n=r(s(478));class h extends n.default{constructor(t,e){super(new i.Vector2(0,0),new i.Vector2(16,16),t,e,new i.Vector4(189,195,199,255))}}e.default=h},126:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(648),n=r(s(478));class h extends n.default{constructor(t,e){super(new i.Vector2(32,0),new i.Vector2(16,16),t,e,new i.Vector4(65,195,123,255))}}e.default=h},335:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(648),n=r(s(478));class h extends n.default{constructor(t,e){super(new i.Vector2(16,0),new i.Vector2(16,16),t,e,new i.Vector4(199,176,101,255))}}e.default=h},486:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.width=t,this.height=e}getCanvasInstance(){const t=document.querySelector("#game");t.width=this.width,t.height=this.height;const e=t.getContext("2d");if(null===e)throw"Your browser don't support canvas :(";return e}}},35:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(533);e.default=class{constructor(){this.keysDown=new Array,window.onkeydown=t=>this.onKeyDown(t),window.onkeyup=t=>this.onKeyUp(t)}onKeyDown(t){const e=this.getPseduoKeyCode(t.code);null!==e&&(this.keysDown[e]=!0)}onKeyUp(t){const e=this.getPseduoKeyCode(t.code);null!==e&&(this.keysDown[e]=!1)}getPseduoKeyCode(t){let e=null;switch(t){case"KeyW":e=r.PseudoKeyCodes.W_KEY;break;case"KeyA":e=r.PseudoKeyCodes.A_KEY;break;case"KeyS":e=r.PseudoKeyCodes.S_KEY;break;case"KeyD":e=r.PseudoKeyCodes.D_KEY;break;case"KeySpace":e=r.PseudoKeyCodes.SPACE_KEY}return e}}},111:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(648),n=r(s(974)),h=s(533),a=r(s(35)),o=r(s(686)),c=r(s(443));class u extends a.default{constructor(t,e,s,r){super(),this.spriteSheet=new c.default("../assets/img/player.png"),this.jumping=!1,this.falling=!1,this.grounded=!0,this.movingLeft=!1,this.movingRight=!1,this.shooting=!1,this.speed=.25,this.posA=new i.Vector2,this.pos=e,this.size=s,this.color=r,this.level=t}render(t){let e=0;this.jumping?e=32:this.movingRight?e=64:this.movingLeft&&(e=96);const s=this.spriteSheet.load(),r=new i.Vector2(e,0),h=this.size;n.default.drawImage(t,s,r,h,this.pos,this.size)}tick(){this.keyboardMove();for(const t of this.level.getAllCollidables())switch(o.default.checkCollision(this,t)){case"b":this.jumping&&(this.falling=!0,this.jumping=!1);break;case"t":this.falling&&(this.grounded=!0,this.falling=!1);break;case null:this.grounded&&(this.grounded=!1,this.falling=!0)}this.falling&&!this.grounded&&(this.pos.y+=this.speed),this.tryJump()}keyboardMove(){!this.keysDown[h.PseudoKeyCodes.W_KEY]||this.jumping&&this.falling||(this.posA=new i.Vector2(this.pos.x,this.pos.y),this.jumping=!0),this.keysDown[h.PseudoKeyCodes.A_KEY]&&(this.pos.x-=this.speed,this.movingLeft=!0,this.movingRight=!1),this.keysDown[h.PseudoKeyCodes.D_KEY]&&(this.pos.x+=this.speed,this.movingLeft=!1,this.movingRight=!0),this.keysDown.find((t=>!0===t))||(this.movingLeft=!1,this.movingRight=!1)}tryJump(){this.jumping&&(this.grounded=!1,this.falling=!1,this.pos.y-=this.speed,this.pos.y<this.posA.y-64&&(this.jumping=!1,this.falling=!0))}}e.default=u},533:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),e.PseudoKeyCodes=void 0,(s=e.PseudoKeyCodes||(e.PseudoKeyCodes={}))[s.W_KEY=0]="W_KEY",s[s.A_KEY=1]="A_KEY",s[s.S_KEY=2]="S_KEY",s[s.D_KEY=3]="D_KEY",s[s.SPACE_KEY=4]="SPACE_KEY"},974:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class s extends CanvasRenderingContext2D{static renderRect(t,e,s,r,i=!1){this.resetFillStyle(t),t.fillStyle=this.getColor(r).toString(),t.fillRect(e.x,e.y,s.x,s.y),i&&t.strokeRect(e.x,e.y,s.x,s.y),this.resetFillStyle(t)}static renderCircle(t,e,s,r,i=!1,n=!0){this.resetFillStyle(t),t.beginPath(),t.fillStyle=this.getColor(r).toString(),t.arc(e.x,e.y,s.x+s.y??0,0,2*Math.PI),n&&t.fill(),i&&t.stroke(),this.resetFillStyle(t)}static renderText(t,e,s,r,i){t.font=s,t.fillText(e,r.x,r.y,i),this.resetTextSettings(t)}static renderShadows(t,e,s,r){t.shadowColor=e,t.shadowBlur=s,t.shadowOffsetX=r.x,t.shadowOffsetY=r.y}static drawImage(t,e,s,r,i,n){t.drawImage(e,s.x,s.y,r.x,r.y,i.x,i.y,n.x,n.y)}static disableImageSmoothing(t){t.imageSmoothingEnabled=!1}static clearRect(t,e,s){t.clearRect(0,0,e,s)}static resetImageSmoothing(t){t.imageSmoothingEnabled=!0}static resetShadows(t){t.shadowColor="rgba(0, 0, 0, 0.0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}static resetFillStyle(t){t.fillStyle="rgb(0, 0, 0)"}static resetTextSettings(t){t.font="10px sans-serif"}static getColor(t){return`rgb(${t.x}, ${t.y}, ${t.z})`}}e.default=s},6:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class s{static range(t,e){const s=[];for(let r=t;r<=e;r++)s.push(r);return s}static isInRange(t,e){return t>=e[0]&&t<=e[1]}static randomRange(t,e){return Math.floor(Math.random()*(e-t+1)+t)}static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}static rgba2Hex(t){let e="";for(const r of t.elements)e+=s.rgbaValue2Hex(r);return parseInt("0x"+e)}static rgbaValue2Hex(t){let e=Number(t).toString(16);return e.length<2&&(e="0"+e),e}}e.default=s},686:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(648);e.default=class{static checkCollision(t,e){const s=t.pos.x+t.size.x/2-(e.pos.x+e.size.x/2),i=t.pos.y+t.size.y/2-(e.pos.y+e.size.y/2),n=new r.Vector2(s,i),h=new r.Vector2(t.size.x/2+e.size.x/2,t.size.y/2+e.size.y/2);let a=null;if(Math.abs(n.x)<h.x&&Math.abs(n.y)<h.y){const e=h.x-Math.abs(n.x),s=h.y-Math.abs(n.y);if(e>=s)return t.falling&&(t.grounded=!0,t.falling=!1),a=n.y>0?"b":"t",n.y>0?t.pos.y+=s:t.pos.y-=s,console.log(a),a;a=n.x>0?"r":"l",n.x>0?t.pos.x+=e:t.pos.x-=e}return a}static intersects(t,e){return t.pos.x<e.pos.x+e.size.x&&t.pos.x+t.size.x>e.pos.x&&t.pos.y<e.pos.y+e.size.y&&t.pos.y+t.size.y>e.pos.y}}},291:function(t,e,s){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(648),n=r(s(111)),h=r(s(319));e.default=class{constructor(t){this.player=null,this.context=t,this.level=new h.default(this.context),this.canvas=t.canvas}init(){this.level.init(),this.player=new n.default(this.level,new i.Vector2(h.default.OFFSET,this.canvas.height-h.default.OFFSET-64),new i.Vector2(32,48),new i.Vector4(255,255,0,255)),this.level.add(this.player)}tick(){this.player.tick()}render(){this.level.render()}}}},e={};function s(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,s),n.exports}s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(862)})();